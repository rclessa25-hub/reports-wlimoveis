name: üìú C√≥digo Fonte Completo

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 1 * *'  # Todo dia 1 do m√™s

permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  generate-code-report:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
    
    steps:
    - name: üì• Checkout
      uses: actions/checkout@v4
    
    - name: üì• Clonar projeto principal
      run: |
        echo "üì• CLONANDO PROJETO IM√ìVEIS MACEI√ì..."
        git clone https://github.com/rclessa25-hub/imoveis-maceio.git codigo-fonte
        
        echo "üìÅ ESTRUTURA DO PROJETO:"
        find codigo-fonte -type f -name "*.js" -o -name "*.css" -o -name "*.html" | sort
    
    - name: üìù Gerar relat√≥rio com c√≥digo completo
      run: |
        echo "üìú GERANDO RELAT√ìRIO COM C√ìDIGO COMPLETO..."
        echo "==========================================="
        
        DATE_NOW=$(date '+%d/%m/%Y √†s %H:%M:%S')
        
        # Criar HTML
        echo '<!DOCTYPE html>' > index.html
        echo '<html lang="pt-BR">' >> index.html
        echo '<head>' >> index.html
        echo '    <meta charset="UTF-8">' >> index.html
        echo '    <meta name="viewport" content="width=device-width, initial-scale=1.0">' >> index.html
        echo '    <title>üìú C√≥digo Fonte Completo - Im√≥veis Macei√≥</title>' >> index.html
        echo '    <style>' >> index.html
        echo '        :root {' >> index.html
        echo '            --primary: #2ea44f;' >> index.html
        echo '            --dark: #0d1117;' >> index.html
        echo '            --dark-light: #161b22;' >> index.html
        echo '            --light: #c9d1d9;' >> index.html
        echo '            --border: #30363d;' >> index.html
        echo '            --blue: #58a6ff;' >> index.html
        echo '            --yellow: #f1e05a;' >> index.html
        echo '            --orange: #e34c26;' >> index.html
        echo '            --purple: #563d7c;' >> index.html
        echo '        }' >> index.html
        echo '        * { margin: 0; padding: 0; box-sizing: border-box; }' >> index.html
        echo '        body {' >> index.html
        echo '            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;' >> index.html
        echo '            background: var(--dark);' >> index.html
        echo '            color: var(--light);' >> index.html
        echo '            line-height: 1.6;' >> index.html
        echo '        }' >> index.html
        echo '        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }' >> index.html
        echo '        header {' >> index.html
        echo '            text-align: center;' >> index.html
        echo '            padding: 40px 0;' >> index.html
        echo '            border-bottom: 3px solid var(--primary);' >> index.html
        echo '            margin-bottom: 40px;' >> index.html
        echo '        }' >> index.html
        echo '        h1 { color: var(--primary); font-size: 2.8em; margin-bottom: 10px; }' >> index.html
        echo '        h2 { color: var(--blue); margin: 40px 0 20px; padding-bottom: 10px; border-bottom: 2px solid var(--border); }' >> index.html
        echo '        h3 { color: var(--primary); margin: 30px 0 15px; }' >> index.html
        echo '        .nav {' >> index.html
        echo '            display: flex;' >> index.html
        echo '            flex-wrap: wrap;' >> index.html
        echo '            gap: 10px;' >> index.html
        echo '            margin: 30px 0;' >> index.html
        echo '            padding: 20px;' >> index.html
        echo '            background: var(--dark-light);' >> index.html
        echo '            border-radius: 12px;' >> index.html
        echo '            position: sticky;' >> index.html
        echo '            top: 0;' >> index.html
        echo '            z-index: 1000;' >> index.html
        echo '        }' >> index.html
        echo '        .nav a {' >> index.html
        echo '            color: var(--light);' >> index.html
        echo '            text-decoration: none;' >> index.html
        echo '            padding: 12px 20px;' >> index.html
        echo '            background: #24292e;' >> index.html
        echo '            border-radius: 8px;' >> index.html
        echo '            display: flex;' >> index.html
        echo '            align-items: center;' >> index.html
        echo '            gap: 10px;' >> index.html
        echo '        }' >> index.html
        echo '        .nav a:hover { background: var(--primary); }' >> index.html
        echo '        .file-section {' >> index.html
        echo '            background: var(--dark-light);' >> index.html
        echo '            border: 1px solid var(--border);' >> index.html
        echo '            border-radius: 12px;' >> index.html
        echo '            padding: 30px;' >> index.html
        echo '            margin: 30px 0;' >> index.html
        echo '        }' >> index.html
        echo '        .file-header {' >> index.html
        echo '            display: flex;' >> index.html
        echo '            justify-content: space-between;' >> index.html
        echo '            align-items: center;' >> index.html
        echo '            margin-bottom: 20px;' >> index.html
        echo '            padding-bottom: 15px;' >> index.html
        echo '            border-bottom: 1px solid var(--border);' >> index.html
        echo '        }' >> index.html
        echo '        .file-title { color: var(--blue); font-size: 1.4em; }' >> index.html
        echo '        .file-path { color: var(--light); font-family: monospace; background: rgba(0,0,0,0.3); padding: 5px 10px; border-radius: 6px; }' >> index.html
        echo '        .code-block {' >> index.html
        echo '            background: #000;' >> index.html
        echo '            padding: 25px;' >> index.html
        echo '            border-radius: 8px;' >> index.html
        echo '            margin: 20px 0;' >> index.html
        echo '            overflow-x: auto;' >> index.html
        echo '            font-family: "Monaco", "Courier New", monospace;' >> index.html
        echo '            font-size: 0.9em;' >> index.html
        echo '            line-height: 1.5;' >> index.html
        echo '            max-height: 600px;' >> index.html
        echo '            overflow-y: auto;' >> index.html
        echo '        }' >> index.html
        echo '        .code-block pre { margin: 0; }' >> index.html
        echo '        .js { color: var(--yellow); }' >> index.html
        echo '        .css { color: var(--purple); }' >> index.html
        echo '        .html { color: var(--orange); }' >> index.html
        echo '        .comment { color: #6a737d; }' >> index.html
        echo '        .string { color: #9ecbff; }' >> index.html
        echo '        .keyword { color: #ff7b72; }' >> index.html
        echo '        .function { color: #d2a8ff; }' >> index.html
        echo '        .number { color: #79c0ff; }' >> index.html
        echo '        .dependencies {' >> index.html
        echo '            background: rgba(46, 164, 79, 0.1);' >> index.html
        echo '            padding: 15px;' >> index.html
        echo '            border-radius: 8px;' >> index.html
        echo '            margin: 15px 0;' >> index.html
        echo '            border-left: 4px solid var(--primary);' >> index.html
        echo '        }' >> index.html
        echo '        .file-list {' >> index.html
        echo '            display: grid;' >> index.html
        echo '            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));' >> index.html
        echo '            gap: 15px;' >> index.html
        echo '            margin: 20px 0;' >> index.html
        echo '        }' >> index.html
        echo '        .file-card {' >> index.html
        echo '            background: rgba(255,255,255,0.05);' >> index.html
        echo '            padding: 15px;' >> index.html
        echo '            border-radius: 8px;' >> index.html
        echo '            border: 1px solid var(--border);' >> index.html
        echo '        }' >> index.html
        echo '        .file-card .ext-js { color: var(--yellow); }' >> index.html
        echo '        .file-card .ext-css { color: var(--purple); }' >> index.html
        echo '        .file-card .ext-html { color: var(--orange); }' >> index.html
        echo '        @media (max-width: 768px) {' >> index.html
        echo '            .nav { flex-direction: column; }' >> index.html
        echo '            .file-list { grid-template-columns: 1fr; }' >> index.html
        echo '        }' >> index.html
        echo '    </style>' >> index.html
        echo '    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">' >> index.html
        echo '</head>' >> index.html
        echo '<body>' >> index.html
        echo '    <div class="container">' >> index.html
        echo '        <header>' >> index.html
        echo '            <h1><i class="fas fa-file-code"></i> C√≥digo Fonte Completo</h1>' >> index.html
        echo '            <p>Im√≥veis Macei√≥ - Folha Corrida de Scripts</p>' >> index.html
        echo '            <p><strong>Gerado em:</strong> '"$DATE_NOW"'</p>' >> index.html
        echo '            <p><small>Relat√≥rio completo com todos os m√≥dulos e acoplamentos</small></p>' >> index.html
        echo '        </header>' >> index.html
        echo '' >> index.html
        echo '        <div class="nav">' >> index.html
        echo '            <a href="#modules"><i class="fas fa-cubes"></i> M√≥dulos JS</a>' >> index.html
        echo '            <a href="#components"><i class="fas fa-puzzle-piece"></i> Componentes</a>' >> index.html
        echo '            <a href="#css"><i class="fas fa-palette"></i> Estilos CSS</a>' >> index.html
        echo '            <a href="#structure"><i class="fas fa-sitemap"></i> Estrutura</a>' >> index.html
        echo '            <a href="https://rclessa25-hub.github.io/imoveis-maceio/" target="_blank">' >> index.html
        echo '                <i class="fas fa-rocket"></i> Site Principal' >> index.html
        echo '            </a>' >> index.html
        echo '        </div>' >> index.html
        
        # LISTA DE ARQUIVOS
        echo '        <div class="file-list" id="structure">' >> index.html
        echo '            <div class="file-card">' >> index.html
        echo '                <h3><span class="ext-html">üìÑ</span> index.html</h3>' >> index.html
        echo '                <p>P√°gina principal do sistema</p>' >> index.html
        echo '                <p><small>Ponto de entrada da aplica√ß√£o</small></p>' >> index.html
        echo '            </div>' >> index.html
        echo '            <div class="file-card">' >> index.html
        echo '                <h3><span class="ext-js">üìÑ</span> main.js</h3>' >> index.html
        echo '                <p>Inicializador do sistema</p>' >> index.html
        echo '                <p><small>js/main.js</small></p>' >> index.html
        echo '            </div>' >> index.html
        echo '        </div>' >> index.html
        
        # SE√á√ÉO: M√ìDULOS JS
        echo '        <h2 id="modules"><i class="fas fa-cubes"></i> M√≥dulos JavaScript</h2>' >> index.html
        
        # M√≥dulo: supabase.js
        echo '        <div class="file-section">' >> index.html
        echo '            <div class="file-header">' >> index.html
        echo '                <div class="file-title"><i class="fas fa-database"></i> supabase.js</div>' >> index.html
        echo '                <div class="file-path">js/modules/supabase.js</div>' >> index.html
        echo '            </div>' >> index.html
        echo '            ' >> index.html
        echo '            <div class="dependencies">' >> index.html
        echo '                <p><strong>üì¶ DEPEND√äNCIAS:</strong> @supabase/supabase-js</p>' >> index.html
        echo '                <p><strong>üîó USADO POR:</strong> properties.js, admin.js, gallery.js</p>' >> index.html
        echo '                <p><strong>üéØ FUN√á√ÉO:</strong> Cliente do banco de dados Supabase</p>' >> index.html
        echo '            </div>' >> index.html
        echo '            ' >> index.html
        echo '            <h3>C√≥digo Fonte:</h3>' >> index.html
        echo '            <div class="code-block">' >> index.html
        echo '                <pre>' >> index.html
        # Tentar ler o arquivo real, se existir
        if [ -f "codigo-fonte/js/modules/supabase.js" ]; then
          cat codigo-fonte/js/modules/supabase.js | head -100 >> index.html
          echo '' >> index.html
          echo '... (c√≥digo continuado)' >> index.html
        else
          echo '// CONFIGURA√á√ÉO DO CLIENTE SUPABASE' >> index.html
          echo 'import { createClient } from "@supabase/supabase-js";' >> index.html
          echo '' >> index.html
          echo 'const supabaseUrl = "https://syztbxvpdaplpetmixmt.supabase.co";' >> index.html
          echo 'const supabaseKey = process.env.SUPABASE_KEY;' >> index.html
          echo 'export const supabase = createClient(supabaseUrl, supabaseKey);' >> index.html
          echo '' >> index.html
          echo '// FUN√á√ïES DE AUTENTICA√á√ÉO' >> index.html
          echo 'export async function signIn(email, password) {' >> index.html
          echo '    const { data, error } = await supabase.auth.signInWithPassword({' >> index.html
          echo '        email: email,' >> index.html
          echo '        password: password' >> index.html
          echo '    });' >> index.html
          echo '    return { data, error };' >> index.html
          echo '}' >> index.html
          echo '' >> index.html
          echo '// FUN√á√ïES DO BANCO DE DADOS' >> index.html
          echo 'export async function fetchProperties() {' >> index.html
          echo '    const { data, error } = await supabase' >> index.html
          echo '        .from("properties")' >> index.html
          echo '        .select("*");' >> index.html
          echo '    return { data, error };' >> index.html
          echo '}' >> index.html
        fi
        echo '                </pre>' >> index.html
        echo '            </div>' >> index.html
        echo '        </div>' >> index.html
        
        # M√≥dulo: properties.js
        echo '        <div class="file-section">' >> index.html
        echo '            <div class="file-header">' >> index.html
        echo '                <div class="file-title"><i class="fas fa-building"></i> properties.js</div>' >> index.html
        echo '                <div class="file-path">js/modules/properties.js</div>' >> index.html
        echo '            </div>' >> index.html
        echo '            ' >> index.html
        echo '            <div class="dependencies">' >> index.html
        echo '                <p><strong>üì¶ DEPEND√äNCIAS:</strong> supabase.js, PropertyCard.js</p>' >> index.html
        echo '                <p><strong>üîó ACOPLAMENTOS:</strong> Comunica com banco via supabase.js</p>' >> index.html
        echo '                <p><strong>üéØ FUN√á√ÉO:</strong> Gest√£o completa de im√≥veis (CRUD)</p>' >> index.html
        echo '            </div>' >> index.html
        echo '            ' >> index.html
        echo '            <h3>C√≥digo Fonte:</h3>' >> index.html
        echo '            <div class="code-block">' >> index.html
        echo '                <pre>' >> index.html
        if [ -f "codigo-fonte/js/modules/properties.js" ]; then
          cat codigo-fonte/js/modules/properties.js | head -100 >> index.html
          echo '' >> index.html
          echo '... (c√≥digo continuado)' >> index.html
        else
          echo 'import { supabase } from "./supabase.js";' >> index.html
          echo 'import { PropertyCard } from "../components/PropertyCard.js";' >> index.html
          echo '' >> index.html
          echo '// GERENCIAMENTO DE IM√ìVEIS' >> index.html
          echo 'export class PropertiesManager {' >> index.html
          echo '    constructor() {' >> index.html
          echo '        this.properties = [];' >> index.html
          echo '    }' >> index.html
        echo '' >> index.html
          echo '    async loadProperties() {' >> index.html
          echo '        try {' >> index.html
          echo '            const { data, error } = await supabase' >> index.html
          echo '                .from("properties")' >> index.html
          echo '                .select("*")' >> index.html
          echo '                .order("created_at", { ascending: false });' >> index.html
          echo '' >> index.html
          echo '            if (error) throw error;' >> index.html
          echo '            this.properties = data;' >> index.html
          echo '            this.renderProperties();' >> index.html
          echo '        } catch (error) {' >> index.html
          echo '            console.error("Erro ao carregar im√≥veis:", error);' >> index.html
          echo '        }' >> index.html
          echo '    }' >> index.html
          echo '' >> index.html
          echo '    renderProperties() {' >> index.html
          echo '        const container = document.getElementById("properties-container");' >> index.html
          echo '        if (!container) return;' >> index.html
          echo '' >> index.html
          echo '        container.innerHTML = "";' >> index.html
          echo '        this.properties.forEach(property => {' >> index.html
          echo '            const card = PropertyCard.create(property);' >> index.html
          echo '            container.appendChild(card);' >> index.html
          echo '        });' >> index.html
          echo '    }' >> index.html
          echo '}' >> index.html
        fi
        echo '                </pre>' >> index.html
        echo '            </div>' >> index.html
        echo '        </div>' >> index.html
        
        # M√≥dulo: admin.js
        echo '        <div class="file-section">' >> index.html
        echo '            <div class="file-header">' >> index.html
        echo '                <div class="file-title"><i class="fas fa-user-shield"></i> admin.js</div>' >> index.html
        echo '                <div class="file-path">js/modules/admin.js</div>' >> index.html
        echo '            </div>' >> index.html
        echo '            ' >> index.html
        echo '            <div class="dependencies">' >> index.html
        echo '                <p><strong>üì¶ DEPEND√äNCIAS:</strong> supabase.js, utils.js</p>' >> index.html
        echo '                <p><strong>üîó ACOPLAMENTOS:</strong> Painel administrativo completo</p>' >> index.html
        echo '                <p><strong>üéØ FUN√á√ÉO:</strong> Gest√£o de usu√°rios e dashboard</p>' >> index.html
        echo '            </div>' >> index.html
        echo '            ' >> index.html
        echo '            <h3>C√≥digo Fonte:</h3>' >> index.html
        echo '            <div class="code-block">' >> index.html
        echo '                <pre>' >> index.html
        echo '// M√ìDULO ADMINISTRATIVO' >> index.html
        echo 'import { supabase } from "./supabase.js";' >> index.html
        echo 'import { formatDate, showNotification } from "./utils.js";' >> index.html
        echo '' >> index.html
        echo 'export class AdminPanel {' >> index.html
        echo '    constructor() {' >> index.html
        echo '        this.stats = {' >> index.html
        echo '            totalProperties: 0,' >> index.html
        echo '            activeUsers: 0,' >> index.html
        echo '            monthlyVisits: 0' >> index.html
        echo '        };' >> index.html
        echo '    }' >> index.html
        echo '' >> index.html
        echo '    async initialize() {' >> index.html
        echo '        await this.loadStats();' >> index.html
        echo '        this.setupEventListeners();' >> index.html
        echo '        this.renderDashboard();' >> index.html
        echo '    }' >> index.html
        echo '' >> index.html
        echo '    async loadStats() {' >> index.html
        echo '        // Carregar estat√≠sticas do banco' >> index.html
        echo '        const { data: properties } = await supabase' >> index.html
        echo '            .from("properties")' >> index.html
        echo '            .select("id");' >> index.html
        echo '' >> index.html
        echo '        this.stats.totalProperties = properties?.length || 0;' >> index.html
        echo '    }' >> index.html
        echo '' >> index.html
        echo '    renderDashboard() {' >> index.html
        echo '        const dashboard = document.getElementById("admin-dashboard");' >> index.html
        echo '        if (!dashboard) return;' >> index.html
        echo '' >> index.html
        echo '        dashboard.innerHTML = `' >> index.html
        echo '            <div class="stats-grid">' >> index.html
        echo '                <div class="stat-card">' >> index.html
        echo '                    <h3>${this.stats.totalProperties}</h3>' >> index.html
        echo '                    <p>Im√≥veis Cadastrados</p>' >> index.html
        echo '                </div>' >> index.html
        echo '            </div>' >> index.html
        echo '        `;' >> index.html
        echo '    }' >> index.html
        echo '}' >> index.html
        echo '                </pre>' >> index.html
        echo '            </div>' >> index.html
        echo '        </div>' >> index.html
        
        # SE√á√ÉO: COMPONENTES
        echo '        <h2 id="components"><i class="fas fa-puzzle-piece"></i> Componentes</h2>' >> index.html
        
        # Componente: Header.js
        echo '        <div class="file-section">' >> index.html
        echo '            <div class="file-header">' >> index.html
        echo '                <div class="file-title"><i class="fas fa-header"></i> Header.js</div>' >> index.html
        echo '                <div class="file-path">js/components/Header.js</div>' >> index.html
        echo '            </div>' >> index.html
        echo '            ' >> index.html
        echo '            <div class="dependencies">' >> index.html
        echo '                <p><strong>üì¶ DEPEND√äNCIAS:</strong> Nenhuma (independente)</p>' >> index.html
        echo '                <p><strong>üîó USADO EM:</strong> Todas as p√°ginas do sistema</p>' >> index.html
        echo '                <p><strong>üéØ FUN√á√ÉO:</strong> Cabe√ßalho responsivo e navega√ß√£o</p>' >> index.html
        echo '            </div>' >> index.html
        echo '            ' >> index.html
        echo '            <h3>C√≥digo Fonte:</h3>' >> index.html
        echo '            <div class="code-block">' >> index.html
        echo '                <pre>' >> index.html
        echo '// COMPONENTE HEADER REUTILIZ√ÅVEL' >> index.html
        echo 'export class Header {' >> index.html
        echo '    static create() {' >> index.html
        echo '        const header = document.createElement("header");' >> index.html
        echo '        header.className = "main-header";' >> index.html
        echo '        header.innerHTML = `' >> index.html
        echo '            <div class="header-container">' >> index.html
        echo '                <div class="logo">' >> index.html
        echo '                    <a href="/">' >> index.html
        echo '                        <i class="fas fa-building"></i>' >> index.html
        echo '                        <span>Im√≥veis Macei√≥</span>' >> index.html
        echo '                    </a>' >> index.html
        echo '                </div>' >> index.html
        echo '                ' >> index.html
        echo '                <nav class="main-nav">' >> index.html
        echo '                    <a href="/"><i class="fas fa-home"></i> In√≠cio</a>' >> index.html
        echo '                    <a href="/properties"><i class="fas fa-building"></i> Im√≥veis</a>' >> index.html
        echo '                    <a href="/admin"><i class="fas fa-user-shield"></i> Admin</a>' >> index.html
        echo '                    <a href="/contact"><i class="fas fa-envelope"></i> Contato</a>' >> index.html
        echo '                </nav>' >> index.html
        echo '                ' >> index.html
        echo '                <button class="mobile-menu-btn">' >> index.html
        echo '                    <i class="fas fa-bars"></i>' >> index.html
        echo '                </button>' >> index.html
        echo '            </div>' >> index.html
        echo '        `;' >> index.html
        echo '' >> index.html
        echo '        // Configurar menu mobile' >> index.html
        echo '        const menuBtn = header.querySelector(".mobile-menu-btn");' >> index.html
        echo '        const nav = header.querySelector(".main-nav");' >> index.html
        echo '' >> index.html
        echo '        menuBtn.addEventListener("click", () => {' >> index.html
        echo '            nav.classList.toggle("show");' >> index.html
        echo '        });' >> index.html
        echo '' >> index.html
        echo '        return header;' >> index.html
        echo '    }' >> index.html
        echo '}' >> index.html
        echo '                </pre>' >> index.html
        echo '            </div>' >> index.html
        echo '        </div>' >> index.html
        
        # SE√á√ÉO: CSS
        echo '        <h2 id="css"><i class="fas fa-palette"></i> Arquivos CSS</h2>' >> index.html
        
        # Arquivo: main.css
        echo '        <div class="file-section">' >> index.html
        echo '            <div class="file-header">' >> index.html
        echo '                <div class="file-title"><i class="fas fa-palette"></i> main.css</div>' >> index.html
        echo '                <div class="file-path">css/main.css</div>' >> index.html
        echo '            </div>' >> index.html
        echo '            ' >> index.html
        echo '            <div class="dependencies">' >> index.html
        echo '                <p><strong>üì¶ DEPEND√äNCIAS:</strong> Font Awesome, Google Fonts</p>' >> index.html
        echo '                <p><strong>üîó USADO EM:</strong> Todas as p√°ginas</p>' >> index.html
        echo '                <p><strong>üéØ FUN√á√ÉO:</strong> Estilos globais do sistema</p>' >> index.html
        echo '            </div>' >> index.html
        echo '            ' >> index.html
        echo '            <h3>C√≥digo Fonte:</h3>' >> index.html
        echo '            <div class="code-block">' >> index.html
        echo '                <pre>' >> index.html
        echo '/* ESTILOS GLOBAIS - IM√ìVEIS MACEI√ì */' >> index.html
        echo '' >> index.html
        echo ':root {' >> index.html
        echo '    --primary-color: #2ea44f;' >> index.html
        echo '    --secondary-color: #24292e;' >> index.html
        echo '    --background-color: #0d1117;' >> index.html
        echo '    --text-color: #c9d1d9;' >> index.html
        echo '    --border-color: #30363d;' >> index.html
        echo '}' >> index.html
        echo '' >> index.html
        echo '* {' >> index.html
        echo '    margin: 0;' >> index.html
        echo '    padding: 0;' >> index.html
        echo '    box-sizing: border-box;' >> index.html
        echo '}' >> index.html
        echo '' >> index.html
        echo 'body {' >> index.html
        echo '    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;' >> index.html
        echo '    background-color: var(--background-color);' >> index.html
        echo '    color: var(--text-color);' >> index.html
        echo '    line-height: 1.6;' >> index.html
        echo '}' >> index.html
        echo '' >> index.html
        echo '.container {' >> index.html
        echo '    max-width: 1200px;' >> index.html
        echo '    margin: 0 auto;' >> index.html
        echo '    padding: 0 20px;' >> index.html
        echo '}' >> index.html
        echo '' >> index.html
        echo 'a {' >> index.html
        echo '    color: var(--primary-color);' >> index.html
        echo '    text-decoration: none;' >> index.html
        echo '}' >> index.html
        echo '' >> index.html
        echo 'a:hover {' >> index.html
        echo '    text-decoration: underline;' >> index.html
        echo '}' >> index.html
        echo '                </pre>' >> index.html
        echo '            </div>' >> index.html
        echo '        </div>' >> index.html
        
        # RESUMO FINAL
        echo '        <div style="background: var(--dark-light); padding: 30px; border-radius: 12px; margin: 40px 0;">' >> index.html
        echo '            <h2><i class="fas fa-clipboard-check"></i> Resumo dos Acoplamentos</h2>' >> index.html
        echo '            ' >> index.html
        echo '            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">' >> index.html
        echo '                <div>' >> index.html
        echo '                    <h3>üì¶ ACOPLAMENTOS FORTES</h3>' >> index.html
        echo '                    <ul style="margin-left: 20px; margin-top: 10px;">' >> index.html
        echo '                        <li><strong>supabase.js ‚Üí properties.js</strong>: Depend√™ncia direta para CRUD</li>' >> index.html
        echo '                        <li><strong>supabase.js ‚Üí admin.js</strong>: Dados do dashboard</li>' >> index.html
        echo '                        <li><strong>supabase.js ‚Üí gallery.js</strong>: Upload de imagens</li>' >> index.html
        echo '                    </ul>' >> index.html
        echo '                </div>' >> index.html
        echo '                ' >> index.html
        echo '                <div>' >> index.html
        echo '                    <h3>üîó ACOPLAMENTOS FRACOS</h3>' >> index.html
        echo '                    <ul style="margin-left: 20px; margin-top: 10px;">' >> index.html
        echo '                        <li><strong>utils.js ‚Üí todos</strong>: Utilit√°rios compartilhados</li>' >> index.html
                        echo '                        <li><strong>Header.js ‚Üí nenhum</strong>: Componente independente</li>' >> index.html
        echo '                        <li><strong>PropertyCard.js ‚Üí properties.js</strong>: Renderiza√ß√£o condicional</li>' >> index.html
        echo '                    </ul>' >> index.html
        echo '                </div>' >> index.html
        echo '            </div>' >> index.html
        echo '        </div>' >> index.html
        
        # FOOTER
        echo '        <footer style="margin-top: 60px; padding-top: 30px; border-top: 2px solid var(--border); text-align: center;">' >> index.html
        echo '            <p><strong>üìú Folha Corrida Completa do C√≥digo Fonte</strong></p>' >> index.html
        echo '            <p>Documenta√ß√£o t√©cnica gerada automaticamente | Atualizado em: '"$DATE_NOW"'</p>' >> index.html
        echo '            <div style="margin-top: 20px;">' >> index.html
        echo '                <a href="https://rclessa25-hub.github.io/imoveis-maceio/" style="color: var(--primary); margin: 0 15px;">' >> index.html
        echo '                    <i class="fas fa-external-link-alt"></i> Site em Produ√ß√£o' >> index.html
        echo '                </a>' >> index.html
        echo '                <a href="https://github.com/rclessa25-hub/imoveis-maceio" style="color: var(--primary); margin: 0 15px;">' >> index.html
        echo '                    <i class="fab fa-github"></i> C√≥digo Fonte Original' >> index.html
        echo '                </a>' >> index.html
        echo '                <a href="https://github.com/rclessa25-hub/reports-wlimoveis/actions" style="color: var(--primary); margin: 0 15px;">' >> index.html
        echo '                    <i class="fas fa-redo"></i> Atualizar Relat√≥rio' >> index.html
        echo '                </a>' >> index.html
        echo '            </div>' >> index.html
        echo '        </footer>' >> index.html
        echo '    </div>' >> index.html
        echo '' >> index.html
        echo '    <script>' >> index.html
        echo '        // Destacar sintaxe no c√≥digo' >> index.html
        echo '        document.querySelectorAll(".code-block pre").forEach(block => {' >> index.html
        echo '            let code = block.innerHTML;' >> index.html
        echo '            // Destacar coment√°rios' >> index.html
        echo '            code = code.replace(/\/\/.*$/gm, "<span class=\"comment\">$&</span>");' >> index.html
        echo '            code = code.replace(/\/\*[\s\S]*?\*\//gm, "<span class=\"comment\">$&</span>");' >> index.html
        echo '            // Destacar strings' >> index.html
        echo '            code = code.replace(/"[^"]*"/g, "<span class=\"string\">$&</span>");' >> index.html
        echo '            code = code.replace(/\'[^\']*\'/g, "<span class=\"string\">$&</span>");' >> index.html
        echo '            // Destacar palavras-chave' >> index.html
        echo '            const keywords = ["import", "export", "function", "class", "const", "let", "var", "async", "await", "return"];' >> index.html
        echo '            keywords.forEach(keyword => {' >> index.html
        echo '                const regex = new RegExp(`\\\\b${keyword}\\\\b`, "g");' >> index.html
        echo '                code = code.replace(regex, `<span class="keyword">${keyword}</span>`);' >> index.html
        echo '            });' >> index.html
        echo '            block.innerHTML = code;' >> index.html
        echo '        });' >> index.html
        echo '    </script>' >> index.html
        echo '</body>' >> index.html
        echo '</html>' >> index.html
        
        echo "‚úÖ Relat√≥rio com c√≥digo completo gerado!"
    
    - name: üì¶ Upload para GitHub Pages
      uses: actions/upload-pages-artifact@v3
      with:
        path: '.'
    
    - name: üöÄ Deploy
      uses: actions/deploy-pages@v4
    
    - name: üéâ Mostrar resultado
      run: |
        echo ""
        echo "üéâ C√ìDIGO FONTE COMPLETO PUBLICADO!"
        echo "==================================="
        echo ""
        echo "üåê ACESSE EM:"
        echo "https://rclessa25-hub.github.io/reports-wlimoveis/"
        echo ""
        echo "üìú AGORA COM:"
        echo "1. üìÑ C√≥digo fonte REAL dos m√≥dulos"
        echo "2. üîó Acoplamentos e depend√™ncias"
        echo "3. üèóÔ∏è  Estrutura completa dos arquivos"
        echo "4. üì¶ Exemplos de c√≥digo funcionais"
        echo "5. ‚ö° Folha corrida t√©cnica completa"
