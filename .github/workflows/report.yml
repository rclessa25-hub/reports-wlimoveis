name: Gerar RelatÃ³rios (Somente AnÃ¡lise)

on:
  workflow_dispatch:

jobs:
  analyze:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    
    - name: Analisar projeto
      run: |
        echo "ğŸ“Š ANÃLISE DO PROJETO"
        echo "======================"
        
        # EstatÃ­sticas
        HTML=$(find . -name "*.html" | wc -l)
        CSS=$(find . -name "*.css" | wc -l)
        JS=$(find . -name "*.js" | wc -l)
        TOTAL=$((HTML + CSS + JS))
        
        echo ""
        echo "ğŸ“ˆ ESTATÃSTICAS:"
        echo "- HTML: $HTML arquivos"
        echo "- CSS: $CSS arquivos"
        echo "- JavaScript: $JS arquivos"
        echo "- TOTAL: $TOTAL arquivos"
        echo ""
        echo "ğŸ“ ESTRUTURA PRINCIPAL:"
        find . -maxdepth 2 -type f -name "*.html" -o -name "*.css" -o -name "*.js" | sort | head -15
        echo ""
        echo "âœ… ANÃLISE CONCLUÃDA"
        echo "Site principal: https://rclessa25-hub.github.io/imoveis-maceio/"
    
    - name: Criar relatÃ³rio de texto (opcional)
      run: |
        # Criar relatÃ³rio em formato texto (nÃ£o interfere no site)
        mkdir -p .reports
        HTML=$(find . -name "*.html" | wc -l)
        CSS=$(find . -name "*.css" | wc -l)
        JS=$(find . -name "*.js" | wc -l)
        
        echo "# RelatÃ³rio TÃ©cnico - $(date)" > .reports/analise.txt
        echo "" >> .reports/analise.txt
        echo "## EstatÃ­sticas" >> .reports/analise.txt
        echo "- HTML: $HTML" >> .reports/analise.txt
        echo "- CSS: $CSS" >> .reports/analise.txt
        echo "- JavaScript: $JS" >> .reports/analise.txt
        echo "" >> .reports/analise.txt
        echo "## Estrutura" >> .reports/analise.txt
        find . -maxdepth 3 -type f | sort >> .reports/analise.txt
        
        echo "ğŸ“„ RelatÃ³rio salvo em: .reports/analise.txt"
