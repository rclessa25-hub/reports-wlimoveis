name: üìä Gerar Relat√≥rio Anal√≠tico Completo

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * 0'  # Todo domingo √† meia-noite

permissions:
  contents: write

jobs:
  analyze:
    runs-on: ubuntu-latest
    outputs:
      report_url: ${{ steps.deploy.outputs.page_url }}
    
    steps:
    - name: üì• Checkout projeto principal
      uses: actions/checkout@v4
      with:
        repository: rclessa25-hub/imoveis-maceio
        token: ${{ secrets.GITHUB_TOKEN }}
    
    - name: üîç Analisar estrutura completa
      id: analysis
      run: |
        echo "üî¨ INICIANDO AN√ÅLISE COMPLETA DO PROJETO..."
        echo "=========================================="
        
        # Coletar dados estruturais
        HTML_FILES=$(find . -name "*.html" -type f)
        CSS_FILES=$(find . -name "*.css" -type f)
        JS_FILES=$(find . -name "*.js" -type f)
        JSON_FILES=$(find . -name "*.json" -type f)
        IMAGE_FILES=$(find assets/images -type f 2>/dev/null | wc -l)
        
        # Contagens
        HTML_COUNT=$(echo "$HTML_FILES" | wc -l)
        CSS_COUNT=$(echo "$CSS_FILES" | wc -l)
        JS_COUNT=$(echo "$JS_FILES" | wc -l)
        JSON_COUNT=$(echo "$JSON_FILES" | wc -l)
        TOTAL_FILES=$((HTML_COUNT + CSS_COUNT + JS_COUNT + JSON_COUNT))
        
        # An√°lise de m√≥dulos JS
        JS_MODULES=$(find js/modules -name "*.js" -type f 2>/dev/null | xargs -I {} basename {} .js | tr '\n' ',' | sed 's/,$//')
        JS_COMPONENTS=$(find js/components -name "*.js" -type f 2>/dev/null | xargs -I {} basename {} .js | tr '\n' ',' | sed 's/,$//')
        
        # An√°lise de linhas de c√≥digo
        TOTAL_LINES=$(find . -name "*.html" -o -name "*.css" -o -name "*.js" -o -name "*.json" | xargs cat 2>/dev/null | wc -l)
        HTML_LINES=$(find . -name "*.html" | xargs cat 2>/dev/null | wc -l)
        CSS_LINES=$(find . -name "*.css" | xargs cat 2>/dev/null | wc -l)
        JS_LINES=$(find . -name "*.js" | xargs cat 2>/dev/null | wc -l)
        
        # Detalhes por arquivo
        echo "üìÅ ESTRUTURA DETALHADA:"
        echo "======================"
        tree -a -I '.git|node_modules|__pycache__' --charset=utf-8
        
        echo ""
        echo "üìä ESTAT√çSTICAS DETALHADAS:"
        echo "=========================="
        echo "- Total de arquivos: $TOTAL_FILES"
        echo "- Total de linhas de c√≥digo: $TOTAL_LINES"
        echo ""
        echo "üìÑ POR TIPO DE ARQUIVO:"
        echo "- HTML: $HTML_COUNT arquivos ($HTML_LINES linhas)"
        echo "- CSS: $CSS_COUNT arquivos ($CSS_LINES linhas)"
        echo "- JavaScript: $JS_COUNT arquivos ($JS_LINES linhas)"
        echo "- JSON: $JSON_COUNT arquivos"
        echo "- Imagens: $IMAGE_FILES arquivos"
        echo ""
        echo "üß© ARQUITETURA MODULAR:"
        echo "- M√≥dulos: $JS_MODULES"
        echo "- Componentes: $JS_COMPONENTS"
        
        # Salvar para outputs
        echo "HTML_COUNT=$HTML_COUNT" >> $GITHUB_OUTPUT
        echo "CSS_COUNT=$CSS_COUNT" >> $GITHUB_OUTPUT
        echo "JS_COUNT=$JS_COUNT" >> $GITHUB_OUTPUT
        echo "JSON_COUNT=$JSON_COUNT" >> $GITHUB_OUTPUT
        echo "TOTAL_FILES=$TOTAL_FILES" >> $GITHUB_OUTPUT
        echo "TOTAL_LINES=$TOTAL_LINES" >> $GITHUB_OUTPUT
        echo "HTML_LINES=$HTML_LINES" >> $GITHUB_OUTPUT
        echo "CSS_LINES=$CSS_LINES" >> $GITHUB_OUTPUT
        echo "JS_LINES=$JS_LINES" >> $GITHUB_OUTPUT
        echo "IMAGE_FILES=$IMAGE_FILES" >> $GITHUB_OUTPUT
        echo "JS_MODULES=$JS_MODULES" >> $GITHUB_OUTPUT
        echo "JS_COMPONENTS=$JS_COMPONENTS" >> $GITHUB_OUTPUT
    
    - name: üìÅ Checkout reposit√≥rio de relat√≥rios
      uses: actions/checkout@v4
      with:
        repository: rclessa25-hub/reports-wlimoveis
        path: './reports-output'
    
    - name: üìù Gerar relat√≥rio anal√≠tico HTML
      run: |
        cd reports-output
        
        # Data atual
        DATE_NOW=$(date '+%d/%m/%Y √†s %H:%M:%S')
        DATE_ISO=$(date -Iseconds)
        
        # Criar relat√≥rio HTML COMPLETO
        cat > index.html << 'HTML'
        <!DOCTYPE html>
        <html lang="pt-BR">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>üìã Relat√≥rio Anal√≠tico - Im√≥veis Macei√≥</title>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <style>
                :root {
                    --primary: #2ea44f;
                    --secondary: #24292e;
                    --dark: #0d1117;
                    --light: #c9d1d9;
                    --card: #161b22;
                    --border: #30363d;
                }
                * { margin: 0; padding: 0; box-sizing: border-box; }
                body {
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    background: var(--dark);
                    color: var(--light);
                    line-height: 1.6;
                    padding: 20px;
                }
                .container {
                    max-width: 1400px;
                    margin: 0 auto;
                }
                header {
                    text-align: center;
                    margin-bottom: 40px;
                    padding-bottom: 20px;
                    border-bottom: 3px solid var(--primary);
                }
                h1 { color: var(--primary); font-size: 2.5em; }
                h2 { color: #58a6ff; margin: 30px 0 15px; padding-bottom: 10px; border-bottom: 1px solid var(--border); }
                h3 { color: var(--primary); margin: 20px 0 10px; }
                
                /* Dashboard */
                .dashboard {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                    gap: 25px;
                    margin: 30px 0;
                }
                .card {
                    background: var(--card);
                    border: 1px solid var(--border);
                    border-radius: 12px;
                    padding: 25px;
                    transition: transform 0.3s;
                }
                .card:hover {
                    transform: translateY(-5px);
                    border-color: var(--primary);
                }
                
                /* Stats Grid */
                .stats-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                    margin: 30px 0;
                }
                .stat-box {
                    background: var(--card);
                    border: 1px solid var(--border);
                    border-radius: 10px;
                    padding: 20px;
                    text-align: center;
                }
                .stat-number {
                    font-size: 2.8em;
                    font-weight: bold;
                    color: var(--primary);
                    line-height: 1;
                }
                .stat-label {
                    margin-top: 10px;
                    color: #8b949e;
                    font-size: 0.9em;
                }
                
                /* File Tree */
                .file-tree {
                    background: var(--card);
                    border: 1px solid var(--border);
                    border-radius: 8px;
                    padding: 20px;
                    font-family: 'Monaco', 'Courier New', monospace;
                    font-size: 0.9em;
                    max-height: 500px;
                    overflow-y: auto;
                }
                .file-tree .folder {
                    color: #58a6ff;
                    font-weight: bold;
                }
                .file-tree .file { color: var(--light); }
                .file-tree .ext-html { color: #e34c26; }
                .file-tree .ext-css { color: #563d7c; }
                .file-tree .ext-js { color: #f1e05a; }
                .file-tree .ext-json { color: #f1e05a; }
                
                /* Modules Grid */
                .modules-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                    gap: 15px;
                    margin: 20px 0;
                }
                .module-card {
                    background: var(--card);
                    border: 1px solid var(--border);
                    border-radius: 8px;
                    padding: 15px;
                }
                .module-card h4 {
                    color: var(--primary);
                    margin-bottom: 10px;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }
                
                /* Navigation */
                nav {
                    background: var(--card);
                    padding: 15px;
                    border-radius: 8px;
                    margin-bottom: 20px;
                    position: sticky;
                    top: 10px;
                    z-index: 100;
                }
                nav a {
                    color: var(--light);
                    text-decoration: none;
                    margin-right: 20px;
                    padding: 8px 12px;
                    border-radius: 6px;
                    transition: all 0.3s;
                }
                nav a:hover {
                    background: var(--primary);
                    color: white;
                }
                
                /* Charts */
                .chart-container {
                    background: var(--card);
                    border-radius: 10px;
                    padding: 20px;
                    margin: 20px 0;
                }
                
                /* Tables */
                table {
                    width: 100%;
                    border-collapse: collapse;
                    margin: 20px 0;
                    background: var(--card);
                    border-radius: 8px;
                    overflow: hidden;
                }
                th, td {
                    border: 1px solid var(--border);
                    padding: 12px;
                    text-align: left;
                }
                th {
                    background: var(--secondary);
                    color: var(--primary);
                }
                
                /* Footer */
                footer {
                    margin-top: 50px;
                    text-align: center;
                    padding-top: 20px;
                    border-top: 1px solid var(--border);
                    color: #8b949e;
                }
                
                /* Responsive */
                @media (max-width: 768px) {
                    .dashboard, .stats-grid, .modules-grid {
                        grid-template-columns: 1fr;
                    }
                    nav { position: static; }
                    nav a { display: block; margin: 5px 0; }
                }
            </style>
        </head>
        <body>
            <div class="container">
                <header>
                    <h1><i class="fas fa-file-alt"></i> Relat√≥rio Anal√≠tico Completo</h1>
                    <h2>Im√≥veis Macei√≥ - Sistema de Gest√£o de Im√≥veis</h2>
                    <p><strong>Gerado em:</strong> ${DATE_NOW} | <strong>ID:</strong> ${DATE_ISO}</p>
                    <p><small>An√°lise estrutural e t√©cnica do projeto completo</small></p>
                </header>
                
                <nav>
                    <a href="#overview"><i class="fas fa-eye"></i> Vis√£o Geral</a>
                    <a href="#structure"><i class="fas fa-sitemap"></i> Estrutura</a>
                    <a href="#modules"><i class="fas fa-cubes"></i> M√≥dulos</a>
                    <a href="#stats"><i class="fas fa-chart-bar"></i> Estat√≠sticas</a>
                    <a href="#analysis"><i class="fas fa-search"></i> An√°lise</a>
                    <a href="https://rclessa25-hub.github.io/imoveis-maceio/" target="_blank">
                        <i class="fas fa-external-link-alt"></i> Site Principal
                    </a>
                </nav>
                
                <section id="overview">
                    <h2><i class="fas fa-globe"></i> Vis√£o Geral do Projeto</h2>
                    <div class="dashboard">
                        <div class="card">
                            <h3><i class="fas fa-info-circle"></i> Informa√ß√µes</h3>
                            <p><strong>Nome:</strong> Im√≥veis Macei√≥</p>
                            <p><strong>Tipo:</strong> Sistema Web de Gest√£o de Im√≥veis</p>
                            <p><strong>Arquitetura:</strong> Frontend Modular com Supabase</p>
                            <p><strong>Hospedagem:</strong> GitHub Pages</p>
                        </div>
                        
                        <div class="card">
                            <h3><i class="fas fa-link"></i> Links Cr√≠ticos</h3>
                            <ul style="list-style: none; padding: 0;">
                                <li><i class="fas fa-rocket"></i> <a href="https://rclessa25-hub.github.io/imoveis-maceio/" target="_blank">Site Principal</a></li>
                                <li><i class="fab fa-github"></i> <a href="https://github.com/rclessa25-hub/imoveis-maceio" target="_blank">Reposit√≥rio</a></li>
                                <li><i class="fas fa-database"></i> <a href="https://syztbxvpdaplpetmixmt.supabase.co" target="_blank">Supabase</a></li>
                                <li><i class="fas fa-font-awesome"></i> <a href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/" target="_blank">Font Awesome</a></li>
                            </ul>
                        </div>
                        
                        <div class="card">
                            <h3><i class="fas fa-cogs"></i> Tecnologias</h3>
                            <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                                <span style="background: #e34c26; color: white; padding: 5px 10px; border-radius: 4px;">HTML5</span>
                                <span style="background: #563d7c; color: white; padding: 5px 10px; border-radius: 4px;">CSS3</span>
                                <span style="background: #f1e05a; color: black; padding: 5px 10px; border-radius: 4px;">JavaScript</span>
                                <span style="background: #3fb27f; color: white; padding: 5px 10px; border-radius: 4px;">Supabase</span>
                                <span style="background: #24292e; color: white; padding: 5px 10px; border-radius: 4px;">GitHub Pages</span>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section id="stats">
                    <h2><i class="fas fa-chart-bar"></i> Estat√≠sticas Quantitativas</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-number">${{ steps.analysis.outputs.TOTAL_FILES }}</div>
                            <div class="stat-label">Total de Arquivos</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">${{ steps.analysis.outputs.TOTAL_LINES }}</div>
                            <div class="stat-label">Linhas de C√≥digo</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">${{ steps.analysis.outputs.HTML_COUNT }}</div>
                            <div class="stat-label">Arquivos HTML</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">${{ steps.analysis.outputs.CSS_COUNT }}</div>
                            <div class="stat-label">Arquivos CSS</div>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-number">${{ steps.analysis.outputs.JS_COUNT }}</div>
                            <div class="stat-label">Arquivos JavaScript</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">${{ steps.analysis.outputs.JSON_COUNT }}</div>
                            <div class="stat-label">Arquivos JSON</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">${{ steps.analysis.outputs.IMAGE_FILES }}</div>
                            <div class="stat-label">Arquivos de Imagem</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">‚úÖ</div>
                            <div class="stat-label">Status Ativo</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <h3><i class="fas fa-chart-pie"></i> Distribui√ß√£o por Tipo de Arquivo</h3>
                        <canvas id="fileTypeChart" width="400" height="200"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h3><i class="fas fa-chart-line"></i> Linhas de C√≥digo por Tipo</h3>
                        <canvas id="linesChart" width="400" height="200"></canvas>
                    </div>
                </section>
                
                <section id="structure">
                    <h2><i class="fas fa-sitemap"></i> Estrutura Completa do Projeto</h2>
                    
                    <div class="card">
                        <h3><i class="fas fa-folder-tree"></i> Hierarquia de Pastas</h3>
                        <div class="file-tree">
        HTML
        
        # Gerar √°rvore de arquivos
        echo "$(tree -a -I '.git|node_modules|__pycache__' --charset=utf-8)" >> index.html
        
        cat >> index.html << 'HTML'
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><i class="fas fa-file-code"></i> Detalhamento por Extens√£o</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Extens√£o</th>
                                    <th>Arquivos</th>
                                    <th>Linhas</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="ext-html">.html</span></td>
                                    <td>${{ steps.analysis.outputs.HTML_COUNT }}</td>
                                    <td>${{ steps.analysis.outputs.HTML_LINES }}</td>
                                    <td>Estrutura e conte√∫do</td>
                                </tr>
                                <tr>
                                    <td><span class="ext-css">.css</span></td>
                                    <td>${{ steps.analysis.outputs.CSS_COUNT }}</td>
                                    <td>${{ steps.analysis.outputs.CSS_LINES }}</td>
                                    <td>Estilos e layout</td>
                                </tr>
                                <tr>
                                    <td><span class="ext-js">.js</span></td>
                                    <td>${{ steps.analysis.outputs.JS_COUNT }}</td>
                                    <td>${{ steps.analysis.outputs.JS_LINES }}</td>
                                    <td>L√≥gica e intera√ß√£o</td>
                                </tr>
                                <tr>
                                    <td><span class="ext-json">.json</span></td>
                                    <td>${{ steps.analysis.outputs.JSON_COUNT }}</td>
                                    <td>-</td>
                                    <td>Configura√ß√µes e dados</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                
                <section id="modules">
                    <h2><i class="fas fa-cubes"></i> Arquitetura Modular</h2>
                    
                    <div class="modules-grid">
                        <div class="module-card">
                            <h4><i class="fas fa-user-shield"></i> M√≥dulo Admin</h4>
                            <p><strong>Arquivo:</strong> admin.js</p>
                            <p><strong>Fun√ß√£o:</strong> Painel administrativo</p>
                            <p><strong>Localiza√ß√£o:</strong> js/modules/</p>
                        </div>
                        
                        <div class="module-card">
                            <h4><i class="fas fa-images"></i> M√≥dulo Gallery</h4>
                            <p><strong>Arquivo:</strong> gallery.js</p>
                            <p><strong>Fun√ß√£o:</strong> Galeria de imagens</p>
                            <p><strong>Localiza√ß√£o:</strong> js/modules/</p>
                        </div>
                        
                        <div class="module-card">
                            <h4><i class="fas fa-building"></i> M√≥dulo Properties</h4>
                            <p><strong>Arquivo:</strong> properties.js</p>
                            <p><strong>Fun√ß√£o:</strong> Gest√£o de im√≥veis</p>
                            <p><strong>Localiza√ß√£o:</strong> js/modules/</p>
                        </div>
                        
                        <div class="module-card">
                            <h4><i class="fas fa-database"></i> M√≥dulo Supabase</h4>
                            <p><strong>Arquivo:</strong> supabase.js</p>
                            <p><strong>Fun√ß√£o:</strong> Integra√ß√£o com banco</p>
                            <p><strong>Localiza√ß√£o:</strong> js/modules/</p>
                        </div>
                        
                        <div class="module-card">
                            <h4><i class="fas fa-tools"></i> M√≥dulo Utils</h4>
                            <p><strong>Arquivo:</strong> utils.js</p>
                            <p><strong>Fun√ß√£o:</strong> Fun√ß√µes utilit√°rias</p>
                            <p><strong>Localiza√ß√£o:</strong> js/modules/</p>
                        </div>
                        
                        <div class="module-card">
                            <h4><i class="fas fa-header"></i> Componente Header</h4>
                            <p><strong>Arquivo:</strong> Header.js</p>
                            <p><strong>Fun√ß√£o:</strong> Cabe√ßalho reutiliz√°vel</p>
                            <p><strong>Localiza√ß√£o:</strong> js/components/</p>
                        </div>
                        
                        <div class="module-card">
                            <h4><i class="fas fa-id-card"></i> Componente PropertyCard</h4>
                            <p><strong>Arquivo:</strong> PropertyCard.js</p>
                            <p><strong>Fun√ß√£o:</strong> Card de im√≥vel</p>
                            <p><strong>Localiza√ß√£o:</strong> js/components/</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><i class="fas fa-code-branch"></i> Fluxo de Depend√™ncias</h3>
                        <pre style="background: var(--card); padding: 15px; border-radius: 8px;">
        index.html
        ‚îú‚îÄ‚îÄ main.js (Ponto de entrada)
        ‚îÇ   ‚îú‚îÄ‚îÄ js/modules/supabase.js
        ‚îÇ   ‚îú‚îÄ‚îÄ js/modules/properties.js
        ‚îÇ   ‚îú‚îÄ‚îÄ js/modules/admin.js
        ‚îÇ   ‚îú‚îÄ‚îÄ js/modules/gallery.js
        ‚îÇ   ‚îú‚îÄ‚îÄ js/modules/utils.js
        ‚îÇ   ‚îú‚îÄ‚îÄ js/components/Header.js
        ‚îÇ   ‚îî‚îÄ‚îÄ js/components/PropertyCard.js
        ‚îî‚îÄ‚îÄ css/
            ‚îú‚îÄ‚îÄ main.css
            ‚îú‚îÄ‚îÄ header.css
            ‚îú‚îÄ‚îÄ admin.css
            ‚îú‚îÄ‚îÄ gallery.css
            ‚îî‚îÄ‚îÄ responsive.css
                        </pre>
                    </div>
                </section>
                
                <section id="analysis">
                    <h2><i class="fas fa-search"></i> An√°lise T√©cnica</h2>
                    
                    <div class="dashboard">
                        <div class="card">
                            <h3><i class="fas fa-check-circle"></i> Pontos Fortes</h3>
                            <ul>
                                <li>‚úÖ Arquitetura modular bem definida</li>
                                <li>‚úÖ Separa√ß√£o clara de responsabilidades</li>
                                <li>‚úÖ CSS organizado por componentes</li>
                                <li>‚úÖ Integra√ß√£o com Supabase funcional</li>
                                <li>‚úÖ Componentes reutiliz√°veis</li>
                            </ul>
                        </div>
                        
                        <div class="card">
                            <h3><i class="fas fa-exclamation-triangle"></i> Recomenda√ß√µes</h3>
                            <ul>
                                <li>üìù Documenta√ß√£o dos m√≥dulos</li>
                                <li>üß™ Testes automatizados</li>
                                <li>üìä Monitoramento de performance</li>
                                <li>üîí Valida√ß√£o de seguran√ßa</li>
                                <li>üöÄ Otimiza√ß√£o de assets</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><i class="fas fa-history"></i> Hist√≥rico de Atualiza√ß√µes</h3>
                        <p>Este relat√≥rio √© atualizado automaticamente:</p>
                        <ul>
                            <li>üîÑ <strong>Atualiza√ß√£o semanal:</strong> Todo domingo √† meia-noite</li>
                            <li>‚ö° <strong>Execu√ß√£o manual:</strong> Dispon√≠vel a qualquer momento</li>
                            <li>üìà <strong>Versionamento:</strong> Cada gera√ß√£o cria novo snapshot</li>
                            <li>üîç <strong>Auditoria:</strong> Hist√≥rico completo mantido</li>
                        </ul>
                    </div>
                </section>
                
                <footer>
                    <h3><i class="fas fa-file-contract"></i> Informa√ß√µes do Sistema</h3>
                    <p><strong>Relat√≥rio Gerado por:</strong> GitHub Actions Workflow</p>
                    <p><strong>Reposit√≥rio de Relat√≥rios:</strong> reports-wlimoveis</p>
                    <p><strong>√öltima An√°lise:</strong> ${DATE_NOW}</p>
                    <p><strong>Pr√≥xima An√°lise Autom√°tica:</strong> Pr√≥ximo domingo √† 00:00</p>
                    
                    <div style="margin-top: 20px; display: flex; justify-content: center; gap: 20px;">
                        <a href="https://rclessa25-hub.github.io/imoveis-maceio/" 
                           style="color: var(--primary); text-decoration: none;">
                            <i class="fas fa-home"></i> Site Principal
                        </a>
                        <a href="https://github.com/rclessa25-hub/imoveis-maceio"
                           style="color: var(--primary); text-decoration: none;">
                            <i class="fab fa-github"></i> C√≥digo Fonte
                        </a>
                        <a href="https://github.com/rclessa25-hub/reports-wlimoveis/actions"
                           style="color: var(--primary); text-decoration: none;">
                            <i class="fas fa-play-circle"></i> Executar Novamente
                        </a>
                    </div>
                </footer>
            </div>
            
            <script>
                // Gr√°fico de tipos de arquivo
                const fileTypeCtx = document.getElementById('fileTypeChart').getContext('2d');
                new Chart(fileTypeCtx, {
                    type: 'pie',
                    data: {
                        labels: ['HTML', 'CSS', 'JavaScript', 'JSON', 'Imagens'],
                        datasets: [{
                            data: [
                                ${{ steps.analysis.outputs.HTML_COUNT }},
                                ${{ steps.analysis.outputs.CSS_COUNT }},
                                ${{ steps.analysis.outputs.JS_COUNT }},
                                ${{ steps.analysis.outputs.JSON_COUNT }},
                                ${{ steps.analysis.outputs.IMAGE_FILES }}
                            ],
                            backgroundColor: [
                                '#e34c26', '#563d7c', '#f1e05a', 
                                '#f1e05a', '#0366d6'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { position: 'bottom' }
                        }
                    }
                });
                
                // Gr√°fico de linhas de c√≥digo
                const linesCtx = document.getElementById('linesChart').getContext('2d');
                new Chart(linesCtx, {
                    type: 'bar',
                    data: {
                        labels: ['HTML', 'CSS', 'JavaScript'],
                        datasets: [{
                            label: 'Linhas de C√≥digo',
                            data: [
                                ${{ steps.analysis.outputs.HTML_LINES }},
                                ${{ steps.analysis.outputs.CSS_LINES }},
                                ${{ steps.analysis.outputs.JS_LINES }}
                            ],
                            backgroundColor: ['#e34c26', '#563d7c', '#f1e05a']
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: { beginAtZero: true }
                        }
                    }
                });
                
                // Navega√ß√£o suave
                document.querySelectorAll('nav a').forEach(anchor => {
                    anchor.addEventListener('click', function(e) {
                        e.preventDefault();
                        const targetId = this.getAttribute('href');
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 80,
                                behavior: 'smooth'
                            });
                        }
                    });
                });
                
                // Atualizar data/hora dinamicamente
                function updateDateTime() {
                    const now = new Date();
                    const dateTimeElement = document.getElementById('current-datetime');
                    if (dateTimeElement) {
                        dateTimeElement.textContent = now.toLocaleString('pt-BR');
                    }
                }
                setInterval(updateDateTime, 1000);
                updateDateTime();
            </script>
        </body>
        </html>
        HTML
        
        echo "‚úÖ Relat√≥rio anal√≠tico completo gerado"
    
    - name: üíæ Commit e push do relat√≥rio
      run: |
        cd reports-output
        
        # Configurar git
        git config --global user.name "GitHub Actions"
        git config --global user.email "actions@github.com"
        
        # Adicionar e commit
        git add .
        
        if git diff --cached --quiet; then
          echo "‚ÑπÔ∏è  Nenhuma mudan√ßa para commit"
        else
          git commit -m "üìä Relat√≥rio anal√≠tico completo [$(date '+%d/%m/%Y %H:%M')]"
          git push
          echo "‚úÖ Relat√≥rio commitado e publicado"
        fi
    
    - name: üåê Informa√ß√µes de acesso
      run: |
        echo ""
        echo "üéâ RELAT√ìRIO ANAL√çTICO COMPLETO GERADO!"
        echo "======================================"
        echo ""
        echo "üåê ACESSO P√öBLICO:"
        echo "https://rclessa25-hub.github.io/reports-wlimoveis/"
        echo ""
        echo "üìä ESTAT√çSTICAS DO PROJETO:"
        echo "- Total de arquivos: ${{ steps.analysis.outputs.TOTAL_FILES }}"
        echo "- Linhas de c√≥digo: ${{ steps.analysis.outputs.TOTAL_LINES }}"
        echo "- HTML: ${{ steps.analysis.outputs.HTML_COUNT }} arquivos"
        echo "- CSS: ${{ steps.analysis.outputs.CSS_COUNT }} arquivos"
        echo "- JavaScript: ${{ steps.analysis.outputs.JS_COUNT }} arquivos"
        echo ""
        echo "‚è∞ PR√ìXIMA ATUALIZA√á√ÉO AUTOM√ÅTICA:"
        echo "Todo domingo √† meia-noite (00:00)"
        echo ""
        echo "üîß EXECU√á√ÉO MANUAL DISPON√çVEL:"
        echo "Acesse Actions ‚Üí Gerar Relat√≥rio Anal√≠tico Completo"
