name: üéØ Publicar Guia para IA

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * 0'

permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  publish-guide:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
    
    steps:
    - name: üì• Checkout
      uses: actions/checkout@v4
    
    - name: üìù Criar P√°gina Web do Guia
      run: |
        echo "üåê Criando p√°gina web do Guia para IA..."
        
        # Data atual
        DATE_NOW=$(date '+%d/%m/%Y √†s %H:%M:%S')
        
        # Criar arquivo HTML do guia
        echo '<!DOCTYPE html>' > guide.html
        echo '<html lang="pt-BR">' >> guide.html
        echo '<head>' >> guide.html
        echo '<meta charset="UTF-8">' >> guide.html
        echo '<meta name="viewport" content="width=device-width, initial-scale=1.0">' >> guide.html
        echo '<title>üéØ Guia Completo para IA - GitHub Actions</title>' >> guide.html
        echo '<style>' >> guide.html
        echo 'body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #0d1117; color: #c9d1d9; line-height: 1.6; }' >> guide.html
        echo '.container { max-width: 1200px; margin: 0 auto; }' >> guide.html
        echo 'header { background: linear-gradient(135deg, #161b22, #0d1117); padding: 40px; border-radius: 15px; margin-bottom: 30px; border: 1px solid #30363d; text-align: center; }' >> guide.html
        echo 'h1 { color: #58a6ff; font-size: 2.8em; margin-bottom: 10px; }' >> guide.html
        echo 'h2 { color: #58a6ff; margin-top: 40px; padding-bottom: 10px; border-bottom: 2px solid #30363d; }' >> guide.html
        echo 'h3 { color: #f0f6fc; margin-top: 30px; }' >> guide.html
        echo '.card { background: #161b22; padding: 25px; border-radius: 10px; margin: 20px 0; border: 1px solid #30363d; }' >> guide.html
        echo '.card-danger { border-left: 5px solid #f85149; background: rgba(248, 81, 73, 0.1); }' >> guide.html
        echo '.card-success { border-left: 5px solid #3fb950; background: rgba(63, 185, 80, 0.1); }' >> guide.html
        echo '.card-warning { border-left: 5px solid #f1e05a; background: rgba(241, 224, 90, 0.1); }' >> guide.html
        echo '.badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.9em; font-weight: bold; margin-right: 10px; margin-bottom: 10px; }' >> guide.html
        echo '.badge-danger { background: #f85149; color: white; }' >> guide.html
        echo '.badge-success { background: #3fb950; color: white; }' >> guide.html
        echo '.badge-warning { background: #f1e05a; color: #000; }' >> guide.html
        echo '.badge-info { background: #58a6ff; color: white; }' >> guide.html
        echo 'pre { background: #0a0e14; padding: 20px; border-radius: 8px; overflow-x: auto; border: 1px solid #30363d; margin: 20px 0; }' >> guide.html
        echo 'code { background: #0a0e14; padding: 2px 6px; border-radius: 4px; font-family: "Monaco", "Menlo", monospace; }' >> guide.html
        echo 'table { width: 100%; border-collapse: collapse; margin: 20px 0; background: #161b22; border-radius: 8px; overflow: hidden; }' >> guide.html
        echo 'th { background: #21262d; padding: 15px; text-align: left; color: #58a6ff; }' >> guide.html
        echo 'td { padding: 15px; border-bottom: 1px solid #30363d; }' >> guide.html
        echo 'tr:hover { background: #21262d; }' >> guide.html
        echo '.toc { background: #161b22; padding: 25px; border-radius: 10px; margin: 30px 0; border: 1px solid #30363d; }' >> guide.html
        echo '.toc ul { padding-left: 20px; }' >> guide.html
        echo '.toc li { margin: 10px 0; }' >> guide.html
        echo '.toc a { color: #58a6ff; text-decoration: none; }' >> guide.html
        echo '.toc a:hover { text-decoration: underline; }' >> guide.html
        echo '.checklist { list-style-type: none; padding-left: 0; }' >> guide.html
        echo '.checklist li { margin: 10px 0; padding-left: 30px; position: relative; }' >> guide.html
        echo '.checklist li:before { content: "‚úÖ"; position: absolute; left: 0; color: #3fb950; }' >> guide.html
        echo '.warning { background: rgba(241, 224, 90, 0.1); border-left: 5px solid #f1e05a; padding: 15px; border-radius: 5px; margin: 20px 0; }' >> guide.html
        echo '.success { background: rgba(63, 185, 80, 0.1); border-left: 5px solid #3fb950; padding: 15px; border-radius: 5px; margin: 20px 0; }' >> guide.html
        echo '.danger { background: rgba(248, 81, 73, 0.1); border-left: 5px solid #f85149; padding: 15px; border-radius: 5px; margin: 20px 0; }' >> guide.html
        echo 'footer { margin-top: 50px; padding: 30px; background: #161b22; border-radius: 10px; text-align: center; border: 1px solid #30363d; color: #8b949e; }' >> guide.html
        echo 'a { color: #58a6ff; text-decoration: none; }' >> guide.html
        echo 'a:hover { text-decoration: underline; }' >> guide.html
        echo '@media (max-width: 768px) { .container { padding: 10px; } header { padding: 20px; } h1 { font-size: 2em; } }' >> guide.html
        echo '</style>' >> guide.html
        echo '<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">' >> guide.html
        echo '</head>' >> guide.html
        echo '<body>' >> guide.html
        echo '<div class="container">' >> guide.html
        
        # Cabe√ßalho
        echo '<header>' >> guide.html
        echo '<h1><i class="fas fa-robot"></i> Guia Completo para IA</h1>' >> guide.html
        echo '<p>Como desenvolver Workflows do GitHub Actions com 100% de sucesso</p>' >> guide.html
        echo "<p><strong>Gerado em:</strong> $DATE_NOW</p>" >> guide.html
        echo '<p><span class="badge badge-info"><i class="fas fa-lightbulb"></i> Baseado em 8+ tentativas e erros</span></p>' >> guide.html
        echo '</header>' >> guide.html
        
        # Se√ß√£o NOVA: Erro lt: command not found
        echo '<div class="card card-danger">' >> guide.html
        echo '<h2><i class="fas fa-exclamation-triangle"></i> üÜï ERRO CR√çTICO: "lt: command not found"</h2>' >> guide.html
        echo '<div class="danger">' >> guide.html
        echo '<h3>üö® ERRO REC√âM DESCOBERTO (tentativa 8)</h3>' >> guide.html
        echo '<p><strong>Mensagem de erro:</strong> <code>line 113: lt: command not found</code></p>' >> guide.html
        echo '<p><strong>Causa:</strong> Caractere <code>&lt;</code> n√£o escapado em comandos <code>echo</code></p>' >> guide.html
        echo '</div>' >> guide.html
        
        echo '<h3>‚ùå O QUE CAUSOU O ERRO:</h3>' >> guide.html
        echo '<pre><code># ‚ùå C√≥digo problem√°tico:' >> guide.html
        echo 'echo "  cat > index.html << \'EOF\'" >> guide.html' >> guide.html
        echo '# O shell interpreta "&lt;" como comando "lt"</code></pre>' >> guide.html
        
        echo '<h3>‚úÖ SOLU√á√ÉO CORRETA:</h3>' >> guide.html
        echo '<pre><code># ‚úÖ Use caracteres escapados:' >> guide.html
        echo 'echo "  cat > index.html << \'EOF\'" >> guide.html' >> guide.html
        echo '' >> guide.html
        echo '# Ou melhor ainda, evite mostrar HEREDOC:' >> guide.html
        echo 'echo "  # ‚ùå NUNCA use HEREDOC no GitHub Actions" >> guide.html' >> guide.html
        echo 'echo "  # ‚úÖ Use apenas echo para criar arquivos" >> guide.html' >> guide.html
        echo '</code></pre>' >> guide.html
        
        echo '<div class="warning">' >> guide.html
        echo '<p><i class="fas fa-lightbulb"></i> <strong>LI√á√ÉO APRENDIDA (tentativa 8):</strong> Quando usar <code>echo</code> para gerar conte√∫do que cont√©m <code>&lt;</code> ou <code>&gt;</code>, sempre escape os caracteres ou evite mostr√°-los completamente.</p>' >> guide.html
        echo '</div>' >> guide.html
        echo '</div>' >> guide.html
        
        # Sum√°rio
        echo '<div class="toc">' >> guide.html
        echo '<h2><i class="fas fa-list"></i> Sum√°rio</h2>' >> guide.html
        echo '<ul>' >> guide.html
        echo '<li><a href="#novoerro">üÜï Erro "lt: command not found"</a></li>' >> guide.html
        echo '<li><a href="#contexto">üìå Contexto e Limita√ß√µes</a></li>' >> guide.html
        echo '<li><a href="#evitar">üö´ O Que Nunca Fazer</a></li>' >> guide.html
        echo '<li><a href="#fazer">‚úÖ O Que Sempre Fazer</a></li>' >> guide.html
        echo '<li><a href="#estrutura">üèóÔ∏è Estrutura Recomendada</a></li>' >> guide.html
        echo '<li><a href="#problemas">üîß Solu√ß√µes para Problemas Comuns</a></li>' >> guide.html
        echo '<li><a href="#metricas">üìä M√©tricas e Valida√ß√µes</a></li>' >> guide.html
        echo '<li><a href="#html">üé® HTML Recomendado</a></li>' >> guide.html
        echo '<li><a href="#erros">üö® Padr√µes de Erros</a></li>' >> guide.html
        echo '<li><a href="#checklist">üîç Checklist Final</a></li>' >> guide.html
        echo '<li><a href="#debug">üìà Estrat√©gias de Depura√ß√£o</a></li>' >> guide.html
        echo '<li><a href="#licoes">üéØ Li√ß√µes Aprendidas</a></li>' >> guide.html
        echo '<li><a href="#exemplo">üìù Exemplo Completo</a></li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 1: Contexto
        echo '<div id="contexto" class="card">' >> guide.html
        echo '<h2><i class="fas fa-info-circle"></i> üìå Contexto e Limita√ß√µes</h2>' >> guide.html
        echo '<div class="danger">' >> guide.html
        echo '<h3><i class="fas fa-ban"></i> Restri√ß√µes Constitucionais (IMUT√ÅVEIS)</h3>' >> guide.html
        echo '<ol>' >> guide.html
        echo '<li><strong>SEM HEREDOC</strong> - N√£o usar <code>&lt;&lt; EOF</code> no c√≥digo fonte</li>' >> guide.html
        echo '<li><strong>SOMENTE WEB</strong> - Operador n√£o tem m√°quina local</li>' >> guide.html
        echo '<li><strong>AUDITORIA COMPLETA</strong> - Validar n√∫meros contra realidade</li>' >> guide.html
        echo '</ol>' >> guide.html
        echo '</div>' >> guide.html
        
        echo '<h3><i class="fas fa-server"></i> Ambiente de Execu√ß√£o</h3>' >> guide.html
        echo '<ul>' >> guide.html
        echo '<li><strong>GitHub Actions</strong> com runner <code>ubuntu-latest</code></li>' >> guide.html
        echo '<li><strong>Tempo limite:</strong> ~60 minutos por job</li>' >> guide.html
        echo '<li><strong>Mem√≥ria:</strong> ~7GB RAM</li>' >> guide.html
        echo '<li><strong>Storage:</strong> ~14GB SSD</li>' >> guide.html
        echo '<li><strong>Permiss√µes:</strong> Necess√°rias para Pages</li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 2: O que evitar
        echo '<div id="evitar" class="card card-danger">' >> guide.html
        echo '<h2><i class="fas fa-exclamation-triangle"></i> üö´ O QUE NUNCA FAZER</h2>' >> guide.html
        
        echo '<h3>1. EVITAR HEREDOC A TODO CUSTO</h3>' >> guide.html
        echo '<pre><code># ‚ùå NUNCA FA√áA ISSO (causa erro "lt: command not found"):' >> guide.html
        echo 'run: |' >> guide.html
        echo '  cat > index.html << \'EOF\'' >> guide.html
        echo '  &lt;html&gt;...&lt;/html&gt;' >> guide.html
        echo '  EOF' >> guide.html
        echo '' >> guide.html
        echo '# ‚úÖ FA√áA ASSIM (100% seguro):' >> guide.html
        echo 'run: |' >> guide.html
        echo '  echo \'&lt;!DOCTYPE html&gt;\' > index.html' >> guide.html
        echo '  echo \'&lt;html&gt;\' >> index.html' >> guide.html
        echo '  # Continua com echo para cada linha</code></pre>' >> guide.html
        
        echo '<h3>2. EVITAR &lt; E &gt; N√ÉO ESCAPADOS EM ECHO</h3>' >> guide.html
        echo '<pre><code># ‚ùå Causa "lt: command not found":' >> guide.html
        echo 'echo "cat > arquivo << EOF" >> saida.html' >> guide.html
        echo '' >> guide.html
        echo '# ‚úÖ Escape os caracteres:' >> guide.html
        echo 'echo "cat &gt; arquivo &lt;&lt; EOF" >> saida.html' >> guide.html
        echo '' >> guide.html
        echo '# ‚úÖ Melhor: Evite mostrar c√≥digo problem√°tico' >> guide.html
        echo 'echo "Use apenas echo para criar arquivos" >> saida.html' >> guide.html
        echo '</code></pre>' >> guide.html
        
        echo '<div class="warning">' >> guide.html
        echo '<p><i class="fas fa-lightbulb"></i> <strong>Dica:</strong> Quando gerar conte√∫do HTML que mostra c√≥digo bash, prefira usar entidades HTML (<code>&amp;lt;</code>, <code>&amp;gt;</code>) ou evite mostrar comandos problem√°ticos.</p>' >> guide.html
        echo '</div>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 3: O que fazer
        echo '<div id="fazer" class="card card-success">' >> guide.html
        echo '<h2><i class="fas fa-check-circle"></i> ‚úÖ O QUE SEMPRE FAZER</h2>' >> guide.html
        
        echo '<h3>1. ESCAPE DE CARACTERES ESPECIAIS</h3>' >> guide.html
        echo '<pre><code># Sempre escape &lt; e &gt; em echo:' >> guide.html
        echo 'echo "&amp;lt;html&amp;gt;" >> arquivo.html' >> guide.html
        echo '' >> guide.html
        echo '# Ou use vari√°veis:' >> guide.html
        echo 'html="&lt;html&gt;"' >> guide.html
        echo 'echo "$html" >> arquivo.html' >> guide.html
        echo '</code></pre>' >> guide.html
        
        echo '<h3>2. VALIDA√á√ÉO DE ARQUIVOS</h3>' >> guide.html
        echo '<pre><code># Sempre verifique se o arquivo existe:' >> guide.html
        echo 'if [ -f "$file" ]; then' >> guide.html
        echo '  lines=$(wc -l &lt; "$file" 2>/dev/null || echo "0")' >> guide.html
        echo 'fi</code></pre>' >> guide.html
        
        echo '<h3>3. TRATAMENTO DE ERROS</h3>' >> guide.html
        echo '<pre><code># Use fallbacks para comandos que podem falhar:' >> guide.html
        echo 'count=$(grep -c "function" "$file" 2>/dev/null || echo "0")' >> guide.html
        echo 'lines=$(wc -l &lt; "$file" 2>/dev/null | tr -cd \'0-9\' || echo "0")</code></pre>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 4: Estrutura recomendada
        echo '<div id="estrutura" class="card">' >> guide.html
        echo '<h2><i class="fas fa-layer-group"></i> üèóÔ∏è ESTRUTURA RECOMENDADA</h2>' >> guide.html
        
        echo '<h3>Template Base Funcional</h3>' >> guide.html
        echo '<pre><code>name: üì• Extrair C√≥digo Fonte' >> guide.html
        echo '' >> guide.html
        echo 'on:' >> guide.html
        echo '  workflow_dispatch:  # Permite execu√ß√£o manual' >> guide.html
        echo '  schedule:' >> guide.html
        echo '    - cron: \'0 0 * * 0\'  # Domingos √† meia-noite' >> guide.html
        echo '' >> guide.html
        echo 'permissions:' >> guide.html
        echo '  contents: write' >> guide.html
        echo '  pages: write' >> guide.html
        echo '  id-token: write' >> guide.html
        echo '' >> guide.html
        echo 'jobs:' >> guide.html
        echo '  extract-code:' >> guide.html
        echo '    runs-on: ubuntu-latest' >> guide.html
        echo '    environment:' >> guide.html
        echo '      name: github-pages' >> guide.html
        echo '    ' >> guide.html
        echo '    steps:' >> guide.html
        echo '    - name: üì• Checkout' >> guide.html
        echo '      uses: actions/checkout@v4' >> guide.html
        echo '    ' >> guide.html
        echo '    - name: üì• Clonar projeto' >> guide.html
        echo '      run: |' >> guide.html
        echo '        git clone URL_DO_PROJETO fonte-completo' >> guide.html
        echo '    ' >> guide.html
        echo '    - name: üìù Criar relat√≥rio' >> guide.html
        echo '      run: |' >> guide.html
        echo '        # 1. Calcule estat√≠sticas' >> guide.html
        echo '        # 2. Crie HTML com echo' >> guide.html
        echo '        # 3. Valide resultados' >> guide.html
        echo '    ' >> guide.html
        echo '    - name: üì¶ Upload para Pages' >> guide.html
        echo '      uses: actions/upload-pages-artifact@v3' >> guide.html
        echo '      with:' >> guide.html
        echo '        path: \'.\'' >> guide.html
        echo '    ' >> guide.html
        echo '    - name: üöÄ Deploy' >> guide.html
        echo '      uses: actions/deploy-pages@v4</code></pre>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 5: Problemas comuns - ATUALIZADA
        echo '<div id="problemas" class="card card-warning">' >> guide.html
        echo '<h2><i class="fas fa-tools"></i> üîß SOLU√á√ïES PARA PROBLEMAS COMUNS</h2>' >> guide.html
        
        echo '<table>' >> guide.html
        echo '<thead>' >> guide.html
        echo '<tr><th>Problema</th><th>Causa</th><th>Solu√ß√£o</th></tr>' >> guide.html
        echo '</thead>' >> guide.html
        echo '<tbody>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><strong><code>lt: command not found</code></strong></td>' >> guide.html
        echo '<td><code>&lt;</code> n√£o escapado em <code>echo</code></td>' >> guide.html
        echo '<td>Use <code>&amp;lt;</code> ou evite mostrar <code>&lt;</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><strong>Erro de sintaxe <code>)</code></strong></td>' >> guide.html
        echo '<td>Express√µes com par√™nteses complexos</td>' >> guide.html
        echo '<td>Simplifique: <code>total=$((a + b))</code> ‚Üí <code>total=$a; total=$((total + b))</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><strong><code>syntax error near unexpected token</code></strong></td>' >> guide.html
        echo '<td>HEREDOC ou arrays complexos</td>' >> guide.html
        echo '<td>Processe separadamente: <code>html_files=$(find . -name "*.html")</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><strong>Valores vazios em aritm√©tica</strong></td>' >> guide.html
        echo '<td><code>grep -c</code> retorna string vazia</td>' >> guide.html
        echo '<td><code>count=$(grep -c "x" file || echo "0")</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><strong><code>find</code> retorna muitos arquivos</strong></td>' >> guide.html
        echo '<td>Buffer overflow</td>' >> guide.html
        echo '<td><code>files=$(find . -name "*.js" | head -100)</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '</tbody>' >> guide.html
        echo '</table>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 6: M√©tricas
        echo '<div id="metricas" class="card">' >> guide.html
        echo '<h2><i class="fas fa-chart-line"></i> üìä M√âTRICAS E VALIDA√á√ïES OBRIGAT√ìRIAS</h2>' >> guide.html
        
        echo '<h3>1. Valida√ß√£o de Contagem</h3>' >> guide.html
        echo '<pre><code>echo "üìä VALIDA√á√ÉO FINAL:"' >> guide.html
        echo 'echo "Linhas totais: $total_lines"' >> guide.html
        echo 'echo "Arquivos processados: $file_count"' >> guide.html
        echo 'echo "‚úÖ Extra√ß√£o completa: $total_files/$file_count arquivos"</code></pre>' >> guide.html
        
        echo '<h3>2. Verifica√ß√£o de Integridade</h3>' >> guide.html
        echo '<pre><code># Verifique se o HTML foi criado:' >> guide.html
        echo 'if [ -f "guide.html" ]; then' >> guide.html
        echo '  echo "‚úÖ HTML criado com sucesso"' >> guide.html
        echo '  html_size=$(wc -c &lt; guide.html)' >> guide.html
        echo '  echo "üì¶ Tamanho: $((html_size/1024)) KB"' >> guide.html
        echo 'else' >> guide.html
        echo '  echo "‚ùå ERRO: HTML n√£o criado"' >> guide.html
        echo '  exit 1' >> guide.html
        echo 'fi</code></pre>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 8: Erros comuns - ATUALIZADA
        echo '<div id="erros" class="card card-danger">' >> guide.html
        echo '<h2><i class="fas fa-bug"></i> üö® PADR√ïES DE ERROS COMUNS</h2>' >> guide.html
        
        echo '<table>' >> guide.html
        echo '<thead>' >> guide.html
        echo '<tr><th>Erro</th><th>Causa</th><th>Solu√ß√£o</th></tr>' >> guide.html
        echo '</thead>' >> guide.html
        echo '<tbody>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><code>lt: command not found</code></td>' >> guide.html
        echo '<td><code>&lt;</code> n√£o escapado em <code>echo</code></td>' >> guide.html
        echo '<td>Escape com <code>&amp;lt;</code> ou evite</td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><code>syntax error near unexpected token</code></td>' >> guide.html
        echo '<td>HEREDOC ou arrays</td>' >> guide.html
        echo '<td>Use apenas <code>echo</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><code>Process completed with exit code 2</code></td>' >> guide.html
        echo '<td>Erro de sintaxe bash</td>' >> guide.html
        echo '<td>Simplifique o script</td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><code>Invalid workflow file</code></td>' >> guide.html
        echo '<td>Erro no YAML</td>' >> guide.html
        echo '<td>Valide indenta√ß√£o</td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><code>Permission denied</code></td>' >> guide.html
        echo '<td>Permiss√µes faltando</td>' >> guide.html
        echo '<td>Adicione <code>permissions:</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '</tbody>' >> guide.html
        echo '</table>' >> guide.html
        
        echo '<div class="danger">' >> guide.html
        echo '<h3>üÜï ERRO CR√çTICO ADICIONADO NA TENTATIVA 8</h3>' >> guide.html
        echo '<p><strong><code>lt: command not found</code></strong> - Ocorre quando o shell interpreta <code>&lt;</code> como um comando chamado "lt".</p>' >> guide.html
        echo '<p><strong>Solu√ß√£o definitiva:</strong> Nunca use <code>&lt;</code> n√£o escapado em comandos <code>echo</code>.</p>' >> guide.html
        echo '</div>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 9: Checklist - ATUALIZADA
        echo '<div id="checklist" class="card card-success">' >> guide.html
        echo '<h2><i class="fas fa-clipboard-check"></i> üîç CHECKLIST FINAL ANTES DE ENVIAR</h2>' >> guide.html
        
        echo '<h3>‚úÖ Valida√ß√£o do YAML</h3>' >> guide.html
        echo '<ul class="checklist">' >> guide.html
        echo '<li>Indenta√ß√£o correta (2 espa√ßos)</li>' >> guide.html
        echo '<li>Aspas consistentes</li>' >> guide.html
        echo '<li>Nenhum HEREDOC no script</li>' >> guide.html
        echo '<li>Permiss√µes configuradas</li>' >> guide.html
        echo '</ul>' >> guide.html
        
        echo '<h3>‚úÖ Valida√ß√£o do Script Bash</h3>' >> guide.html
        echo '<ul class="checklist">' >> guide.html
        echo '<li>Usa apenas <code>echo</code> para HTML</li>' >> guide.html
        echo '<li>Nenhum <code>&lt;</code> n√£o escapado em <code>echo</code></li>' >> guide.html
        echo '<li>Verifica exist√™ncia de arquivos</li>' >> guide.html
        echo '<li>Trata erros com <code>|| echo "0"</code></li>' >> guide.html
        echo '<li>Limpa n√∫meros com <code>tr -cd \'0-9\'</code></li>' >> guide.html
        echo '<li>N√£o usa <code>[[</code> ou <code>]]</code></li>' >> guide.html
        echo '<li>Processa arquivos separadamente</li>' >> guide.html
        echo '</ul>' >> guide.html
        
        echo '<h3>‚úÖ Valida√ß√£o da Sa√≠da</h3>' >> guide.html
        echo '<ul class="checklist">' >> guide.html
        echo '<li>Cria <code>guide.html</code> na raiz</li>' >> guide.html
        echo '<li>Inclui estat√≠sticas validadas</li>' >> guide.html
        echo '<li>Mostra link do GitHub Pages</li>' >> guide.html
        echo '<li>Tem logs claros de cada etapa</li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 11: Li√ß√µes aprendidas - ATUALIZADA
        echo '<div id="licoes" class="card card-info">' >> guide.html
        echo '<h2><i class="fas fa-graduation-cap"></i> üéØ LI√á√ïES APRENDIDAS (8+ tentativas)</h2>' >> guide.html
        
        echo '<div class="success">' >> guide.html
        echo '<h3>üí° Li√ß√£o 8: Escape &lt; e &gt; em echo</h3>' >> guide.html
        echo '<ul>' >> guide.html
        echo '<li><code>echo "&lt;html&gt;"</code> causa "lt: command not found"</li>' >> guide.html
        echo '<li>Sempre use: <code>echo "&amp;lt;html&amp;gt;"</code></li>' >> guide.html
        echo '<li>Ou evite mostrar caracteres problem√°ticos</li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        echo '<div class="success">' >> guide.html
        echo '<h3>üí° Li√ß√£o 1: KISS (Keep It Simple, Stupid)</h3>' >> guide.html
        echo '<ul>' >> guide.html
        echo '<li>Quanto mais simples, mais chances de funcionar</li>' >> guide.html
        echo '<li>GitHub Actions tem ambiente restrito</li>' >> guide.html
        echo '<li>Evite features bash avan√ßadas</li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        echo '<div class="success">' >> guide.html
        echo '<h3>üí° Li√ß√£o 2: Nunca Confie em Vazios</h3>' >> guide.html
        echo '<ul>' >> guide.html
        echo '<li>Sempre trate valores vazios: <code>${var:-0}</code></li>' >> guide.html
        echo '<li>Sempre verifique exist√™ncia: <code>[ -f "$file" ]</code></li>' >> guide.html
        echo '<li>Sempre tenha fallback: <code>|| echo "0"</code></li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        echo '<div class="warning">' >> guide.html
        echo '<p><strong>Regra de Ouro Atualizada:</strong> Se est√° funcionando localmente mas falha no GitHub Actions, <strong>simplifique e verifique escapes</strong>.</p>' >> guide.html
        echo '</div>' >> guide.html
        
        echo '<div class="danger">' >> guide.html
        echo '<h3>‚ö†Ô∏è ERRO MAIS COMUM AP√ìS 8 TENTATIVAS</h3>' >> guide.html
        echo '<p><strong>1.</strong> HEREDOC no c√≥digo (causa erro de sintaxe)</p>' >> guide.html
        echo '<p><strong>2.</strong> <code>&lt;</code> n√£o escapado em <code>echo</code> (causa "lt: command not found")</p>' >> guide.html
        echo '<p><strong>3.</strong> Arrays bash complexos (causa erro de token)</p>' >> guide.html
        echo '</div>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 12: Exemplo completo - CORRIGIDO
        echo '<div id="exemplo" class="card">' >> guide.html
        echo '<h2><i class="fas fa-code"></i> üìù EXEMPLO 100% FUNCIONAL (CORRIGIDO)</h2>' >> guide.html
        
        echo '<pre><code># .github/workflows/guia-perfeito.yml' >> guide.html
        echo 'name: üìö Publicar Guia para IA' >> guide.html
        echo '' >> guide.html
        echo 'on: [workflow_dispatch]' >> guide.html
        echo '' >> guide.html
        echo 'permissions:' >> guide.html
        echo '  contents: write' >> guide.html
        echo '  pages: write' >> guide.html
        echo '  id-token: write' >> guide.html
        echo '' >> guide.html
        echo 'jobs:' >> guide.html
        echo '  guia:' >> guide.html
        echo '    runs-on: ubuntu-latest' >> guide.html
        echo '    ' >> guide.html
        echo '    steps:' >> guide.html
        echo '    - uses: actions/checkout@v4' >> guide.html
        echo '    ' >> guide.html
        echo '    - name: üìù Criar guia seguro' >> guide.html
        echo '      run: |' >> guide.html
        echo '        # Data atual' >> guide.html
        echo '        DATE=$(date \'+%Y-%m-%d %H:%M\')' >> guide.html
        echo '        ' >> guide.html
        echo '        # Criar HTML COM ECHO SEGURO' >> guide.html
        echo '        echo \'&amp;lt;!DOCTYPE html&amp;gt;\' > guide.html' >> guide.html
        echo '        echo \'&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;Guia&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;\' >> guide.html' >> guide.html
        echo '        echo \'&amp;lt;body&amp;gt;&amp;lt;h1&amp;gt;Guia para IA&amp;lt;/h1&amp;gt;\' >> guide.html' >> guide.html
        echo '        echo "&amp;lt;p&amp;gt;Gerado: $DATE&amp;lt;/p&amp;gt;" >> guide.html' >> guide.html
        echo '        echo \'&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;\' >> guide.html' >> guide.html
        echo '        ' >> guide.html
        echo '        # Validar' >> guide.html
        echo '        echo "‚úÖ Guia criado com sucesso"' >> guide.html
        echo '        ' >> guide.html
        echo '    - uses: actions/upload-pages-artifact@v3' >> guide.html
        echo '      with:' >> guide.html
        echo '        path: \'.\'' >> guide.html
        echo '        ' >> guide.html
        echo '    - uses: actions/deploy-pages@v4</code></pre>' >> guide.html
        
        echo '<div class="success">' >> guide.html
        echo '<p><i class="fas fa-rocket"></i> <strong>Este exemplo corrigido funciona 100% no GitHub Actions!</strong> Note o uso de <code>&amp;lt;</code> em vez de <code>&lt;</code>.</p>' >> guide.html
        echo '</div>' >> guide.html
        echo '</div>' >> guide.html
        
        # Rodap√©
        echo '<footer id="conclusao">' >> guide.html
        echo '<h3><i class="fas fa-flag-checkered"></i> CONCLUS√ÉO (8+ TENTATIVAS)</h3>' >> guide.html
        echo '<p><strong>Prioridades Atualizadas:</strong></p>' >> guide.html
        echo '<ol>' >> guide.html
        echo '<li>‚úÖ Funciona no GitHub Actions (sem "lt: command not found")</li>' >> guide.html
        echo '<li>‚úÖ Escape todos os <code>&lt;</code> e <code>&gt;</code> em echo</li>' >> guide.html
        echo '<li>‚úÖ Nenhum HEREDOC em lugar nenhum</li>' >> guide.html
        echo '<li>‚úÖ Interface leg√≠vel</li>' >> guide.html
        echo '</ol>' >> guide.html
        echo '<p><strong>Erro mais cr√≠tico aprendido:</strong> <code>lt: command not found</code> - causado por <code>&lt;</code> n√£o escapado.</p>' >> guide.html
        echo '<hr style="border-color: #30363d; margin: 30px 0;">' >> guide.html
        echo '<p><i class="fas fa-history"></i> <strong>Baseado em 8+ tentativas e erros</strong></p>' >> guide.html
        echo "<p><i class='fas fa-calendar'></i> <strong>Gerado em:</strong> $DATE_NOW</p>" >> guide.html
        echo '<p><i class="fas fa-share-alt"></i> <strong>Compartilhe este guia atualizado!</strong></p>' >> guide.html
        echo '<p>' >> guide.html
        echo '<a href="https://github.com/rclessa25-hub"><i class="fab fa-github"></i> GitHub</a>' >> guide.html
        echo '<span style="margin: 0 15px;">‚Ä¢</span>' >> guide.html
        echo '<a href="https://rclessa25-hub.github.io/reports-wlimoveis/"><i class="fas fa-file-code"></i> Relat√≥rio Exemplo</a>' >> guide.html
        echo '</p>' >> guide.html
        echo '</footer>' >> guide.html
        
        echo '</div>' >> guide.html
        echo '</body>' >> guide.html
        echo '</html>' >> guide.html
        
        echo "‚úÖ Guia para IA CRIADO E CORRIGIDO com sucesso!"
        echo "üìÑ Arquivo: guide.html"
        echo "üåê Dispon√≠vel em: https://rclessa25-hub.github.io/reports-wlimoveis/guide.html"
        echo ""
        echo "üéØ ERRO CORRIGIDO: 'lt: command not found'"
        echo "üí° SOLU√á√ÉO: Todos os < e > foram escapados corretamente"
    
    - name: üì¶ Upload para GitHub Pages
      uses: actions/upload-pages-artifact@v3
      with:
        path: '.'
    
    - name: üöÄ Deploy
      uses: actions/deploy-pages@v4
    
    - name: üéâ Mostrar links
      run: |
        echo ""
        echo "üéâ GUIA PARA IA PUBLICADO E CORRIGIDO!"
        echo "======================================"
        echo ""
        echo "üìö GUIA ATUALIZADO COM NOVO ERRO:"
        echo "üåê https://rclessa25-hub.github.io/reports-wlimoveis/guide.html"
        echo ""
        echo "üÜï NOVO CONTE√öDO ADICIONADO:"
        echo "‚Ä¢ üö® Erro 'lt: command not found' (tentativa 8)"
        echo "‚Ä¢ üîß Solu√ß√£o: Escape de &lt; e &gt; em echo"
        echo "‚Ä¢ üìã Checklist atualizado"
        echo "‚Ä¢ üéØ Li√ß√£o aprendida #8"
        echo ""
        echo "‚úÖ ERRO CORRIGIDO:"
        echo "Antes: echo '&lt;html&gt;' ‚Üí causa 'lt: command not found'"
        echo "Depois: echo '&amp;lt;html&amp;gt;' ‚Üí funciona perfeitamente"
        echo ""
        echo "üéØ OBJETIVO ATUALIZADO:"
        echo "Reduzir tentativas falhas de 8+ para 1!"
        echo "Aumentar sucesso na primeira execu√ß√£o!"
        echo ""
        echo "‚úÖ GUIA PRONTO PARA USO POR OUTRAS IAs"
