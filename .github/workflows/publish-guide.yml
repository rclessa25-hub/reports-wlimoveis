name: üéØ Publicar Guia para IA

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * 0'  # Atualiza todo domingo

permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  publish-guide:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
    
    steps:
    - name: üì• Checkout
      uses: actions/checkout@v4
    
    - name: üìù Criar P√°gina Web do Guia
      run: |
        echo "üåê Criando p√°gina web do Guia para IA..."
        
        # Data atual
        DATE_NOW=$(date '+%d/%m/%Y √†s %H:%M:%S')
        
        # Criar arquivo HTML do guia
        echo '<!DOCTYPE html>' > guide.html
        echo '<html lang="pt-BR">' >> guide.html
        echo '<head>' >> guide.html
        echo '<meta charset="UTF-8">' >> guide.html
        echo '<meta name="viewport" content="width=device-width, initial-scale=1.0">' >> guide.html
        echo '<title>üéØ Guia Completo para IA - GitHub Actions</title>' >> guide.html
        echo '<style>' >> guide.html
        echo 'body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #0d1117; color: #c9d1d9; line-height: 1.6; }' >> guide.html
        echo '.container { max-width: 1200px; margin: 0 auto; }' >> guide.html
        echo 'header { background: linear-gradient(135deg, #161b22, #0d1117); padding: 40px; border-radius: 15px; margin-bottom: 30px; border: 1px solid #30363d; text-align: center; }' >> guide.html
        echo 'h1 { color: #58a6ff; font-size: 2.8em; margin-bottom: 10px; }' >> guide.html
        echo 'h2 { color: #58a6ff; margin-top: 40px; padding-bottom: 10px; border-bottom: 2px solid #30363d; }' >> guide.html
        echo 'h3 { color: #f0f6fc; margin-top: 30px; }' >> guide.html
        echo '.card { background: #161b22; padding: 25px; border-radius: 10px; margin: 20px 0; border: 1px solid #30363d; }' >> guide.html
        echo '.card-danger { border-left: 5px solid #f85149; background: rgba(248, 81, 73, 0.1); }' >> guide.html
        echo '.card-success { border-left: 5px solid #3fb950; background: rgba(63, 185, 80, 0.1); }' >> guide.html
        echo '.card-warning { border-left: 5px solid #f1e05a; background: rgba(241, 224, 90, 0.1); }' >> guide.html
        echo '.badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.9em; font-weight: bold; margin-right: 10px; margin-bottom: 10px; }' >> guide.html
        echo '.badge-danger { background: #f85149; color: white; }' >> guide.html
        echo '.badge-success { background: #3fb950; color: white; }' >> guide.html
        echo '.badge-warning { background: #f1e05a; color: #000; }' >> guide.html
        echo '.badge-info { background: #58a6ff; color: white; }' >> guide.html
        echo 'pre { background: #0a0e14; padding: 20px; border-radius: 8px; overflow-x: auto; border: 1px solid #30363d; margin: 20px 0; }' >> guide.html
        echo 'code { background: #0a0e14; padding: 2px 6px; border-radius: 4px; font-family: "Monaco", "Menlo", monospace; }' >> guide.html
        echo 'table { width: 100%; border-collapse: collapse; margin: 20px 0; background: #161b22; border-radius: 8px; overflow: hidden; }' >> guide.html
        echo 'th { background: #21262d; padding: 15px; text-align: left; color: #58a6ff; }' >> guide.html
        echo 'td { padding: 15px; border-bottom: 1px solid #30363d; }' >> guide.html
        echo 'tr:hover { background: #21262d; }' >> guide.html
        echo '.toc { background: #161b22; padding: 25px; border-radius: 10px; margin: 30px 0; border: 1px solid #30363d; }' >> guide.html
        echo '.toc ul { padding-left: 20px; }' >> guide.html
        echo '.toc li { margin: 10px 0; }' >> guide.html
        echo '.toc a { color: #58a6ff; text-decoration: none; }' >> guide.html
        echo '.toc a:hover { text-decoration: underline; }' >> guide.html
        echo '.checklist { list-style-type: none; padding-left: 0; }' >> guide.html
        echo '.checklist li { margin: 10px 0; padding-left: 30px; position: relative; }' >> guide.html
        echo '.checklist li:before { content: "‚úÖ"; position: absolute; left: 0; color: #3fb950; }' >> guide.html
        echo '.warning { background: rgba(241, 224, 90, 0.1); border-left: 5px solid #f1e05a; padding: 15px; border-radius: 5px; margin: 20px 0; }' >> guide.html
        echo '.success { background: rgba(63, 185, 80, 0.1); border-left: 5px solid #3fb950; padding: 15px; border-radius: 5px; margin: 20px 0; }' >> guide.html
        echo '.danger { background: rgba(248, 81, 73, 0.1); border-left: 5px solid #f85149; padding: 15px; border-radius: 5px; margin: 20px 0; }' >> guide.html
        echo 'footer { margin-top: 50px; padding: 30px; background: #161b22; border-radius: 10px; text-align: center; border: 1px solid #30363d; color: #8b949e; }' >> guide.html
        echo 'a { color: #58a6ff; text-decoration: none; }' >> guide.html
        echo 'a:hover { text-decoration: underline; }' >> guide.html
        echo '@media (max-width: 768px) { .container { padding: 10px; } header { padding: 20px; } h1 { font-size: 2em; } }' >> guide.html
        echo '</style>' >> guide.html
        echo '<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">' >> guide.html
        echo '</head>' >> guide.html
        echo '<body>' >> guide.html
        echo '<div class="container">' >> guide.html
        
        # Cabe√ßalho
        echo '<header>' >> guide.html
        echo '<h1><i class="fas fa-robot"></i> Guia Completo para IA</h1>' >> guide.html
        echo '<p>Como desenvolver Workflows do GitHub Actions com 100% de sucesso</p>' >> guide.html
        echo "<p><strong>Gerado em:</strong> $DATE_NOW</p>" >> guide.html
        echo '<p><span class="badge badge-info"><i class="fas fa-lightbulb"></i> Baseado em 7+ tentativas e erros</span></p>' >> guide.html
        echo '</header>' >> guide.html
        
        # Sum√°rio
        echo '<div class="toc">' >> guide.html
        echo '<h2><i class="fas fa-list"></i> Sum√°rio</h2>' >> guide.html
        echo '<ul>' >> guide.html
        echo '<li><a href="#contexto">üìå Contexto e Limita√ß√µes</a></li>' >> guide.html
        echo '<li><a href="#evitar">üö´ O Que Nunca Fazer</a></li>' >> guide.html
        echo '<li><a href="#fazer">‚úÖ O Que Sempre Fazer</a></li>' >> guide.html
        echo '<li><a href="#estrutura">üèóÔ∏è Estrutura Recomendada</a></li>' >> guide.html
        echo '<li><a href="#problemas">üîß Solu√ß√µes para Problemas Comuns</a></li>' >> guide.html
        echo '<li><a href="#metricas">üìä M√©tricas e Valida√ß√µes</a></li>' >> guide.html
        echo '<li><a href="#html">üé® HTML Recomendado</a></li>' >> guide.html
        echo '<li><a href="#erros">üö® Padr√µes de Erros</a></li>' >> guide.html
        echo '<li><a href="#checklist">üîç Checklist Final</a></li>' >> guide.html
        echo '<li><a href="#debug">üìà Estrat√©gias de Depura√ß√£o</a></li>' >> guide.html
        echo '<li><a href="#licoes">üéØ Li√ß√µes Aprendidas</a></li>' >> guide.html
        echo '<li><a href="#exemplo">üìù Exemplo Completo</a></li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 1: Contexto
        echo '<div id="contexto" class="card">' >> guide.html
        echo '<h2><i class="fas fa-info-circle"></i> üìå Contexto e Limita√ß√µes</h2>' >> guide.html
        echo '<div class="danger">' >> guide.html
        echo '<h3><i class="fas fa-ban"></i> Restri√ß√µes Constitucionais (IMUT√ÅVEIS)</h3>' >> guide.html
        echo '<ol>' >> guide.html
        echo '<li><strong>SEM HEREDOC</strong> - N√£o usar <code>&lt;&lt; EOF</code> no c√≥digo fonte</li>' >> guide.html
        echo '<li><strong>SOMENTE WEB</strong> - Operador n√£o tem m√°quina local</li>' >> guide.html
        echo '<li><strong>AUDITORIA COMPLETA</strong> - Validar n√∫meros contra realidade</li>' >> guide.html
        echo '</ol>' >> guide.html
        echo '</div>' >> guide.html
        
        echo '<h3><i class="fas fa-server"></i> Ambiente de Execu√ß√£o</h3>' >> guide.html
        echo '<ul>' >> guide.html
        echo '<li><strong>GitHub Actions</strong> com runner <code>ubuntu-latest</code></li>' >> guide.html
        echo '<li><strong>Tempo limite:</strong> ~60 minutos por job</li>' >> guide.html
        echo '<li><strong>Mem√≥ria:</strong> ~7GB RAM</li>' >> guide.html
        echo '<li><strong>Storage:</strong> ~14GB SSD</li>' >> guide.html
        echo '<li><strong>Permiss√µes:</strong> Necess√°rias para Pages</li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 2: O que evitar
        echo '<div id="evitar" class="card card-danger">' >> guide.html
        echo '<h2><i class="fas fa-exclamation-triangle"></i> üö´ O QUE NUNCA FAZER</h2>' >> guide.html
        
        echo '<h3>1. EVITAR HEREDOC A TODO CUSTO</h3>' >> guide.html
        echo '<pre><code># ‚ùå NUNCA FA√áA ISSO:' >> guide.html
        echo 'run: |' >> guide.html
        echo '  cat > index.html << \'EOF\'' >> guide.html
        echo '  &lt;html&gt;...&lt;/html&gt;' >> guide.html
        echo '  EOF' >> guide.html
        echo '' >> guide.html
        echo '# ‚úÖ FA√áA ASSIM:' >> guide.html
        echo 'run: |' >> guide.html
        echo '  echo \'&lt;!DOCTYPE html&gt;\' > index.html' >> guide.html
        echo '  echo \'&lt;html&gt;\' >> index.html' >> guide.html
        echo '  # Continua com echo para cada linha</code></pre>' >> guide.html
        
        echo '<h3>2. EVITAR ARRAYS BASH COMPLEXOS</h3>' >> guide.html
        echo '<pre><code># ‚ùå Problem√°tico no GitHub Actions:' >> guide.html
        echo 'files=($(find . -name "*.js"))' >> guide.html
        echo 'for file in "${files[@]}"; do' >> guide.html
        echo '' >> guide.html
        echo '# ‚úÖ Mais seguro:' >> guide.html
        echo 'for file in $(find . -name "*.js"); do' >> guide.html
        echo '  if [ -f "$file" ]; then' >> guide.html
        echo '    # processamento' >> guide.html
        echo '  fi' >> guide.html
        echo 'done</code></pre>' >> guide.html
        
        echo '<div class="warning">' >> guide.html
        echo '<p><i class="fas fa-lightbulb"></i> <strong>Dica:</strong> GitHub Actions tem ambiente mais restrito que m√°quina local. Simplifique sempre!</p>' >> guide.html
        echo '</div>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 3: O que fazer
        echo '<div id="fazer" class="card card-success">' >> guide.html
        echo '<h2><i class="fas fa-check-circle"></i> ‚úÖ O QUE SEMPRE FAZER</h2>' >> guide.html
        
        echo '<h3>1. VALIDA√á√ÉO DE ARQUIVOS</h3>' >> guide.html
        echo '<pre><code># Sempre verifique se o arquivo existe:' >> guide.html
        echo 'if [ -f "$file" ]; then' >> guide.html
        echo '  lines=$(wc -l < "$file" 2>/dev/null || echo "0")' >> guide.html
        echo 'fi</code></pre>' >> guide.html
        
        echo '<h3>2. TRATAMENTO DE ERROS</h3>' >> guide.html
        echo '<pre><code># Use fallbacks para comandos que podem falhar:' >> guide.html
        echo 'count=$(grep -c "function" "$file" 2>/dev/null || echo "0")' >> guide.html
        echo 'lines=$(wc -l < "$file" 2>/dev/null | tr -cd \'0-9\' || echo "0")</code></pre>' >> guide.html
        
        echo '<h3>3. ESCAPE DE HTML SEGURO</h3>' >> guide.html
        echo '<pre><code># Escape linha por linha:' >> guide.html
        echo 'line=$(echo "$line" | sed \'s/&/\&amp;/g\')' >> guide.html
        echo 'line=$(echo "$line" | sed \'s/</\&lt;/g\')' >> guide.html
        echo 'line=$(echo "$line" | sed \'s/>/\&gt;/g\')' >> guide.html
        echo 'line=$(echo "$line" | sed \'s/"/\&quot;/g\')</code></pre>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 4: Estrutura recomendada
        echo '<div id="estrutura" class="card">' >> guide.html
        echo '<h2><i class="fas fa-layer-group"></i> üèóÔ∏è ESTRUTURA RECOMENDADA</h2>' >> guide.html
        
        echo '<h3>Template Base Funcional</h3>' >> guide.html
        echo '<pre><code>name: üì• Extrair C√≥digo Fonte' >> guide.html
        echo '' >> guide.html
        echo 'on:' >> guide.html
        echo '  workflow_dispatch:  # Permite execu√ß√£o manual' >> guide.html
        echo '  schedule:' >> guide.html
        echo '    - cron: \'0 0 * * 0\'  # Domingos √† meia-noite' >> guide.html
        echo '' >> guide.html
        echo 'permissions:' >> guide.html
        echo '  contents: write' >> guide.html
        echo '  pages: write' >> guide.html
        echo '  id-token: write' >> guide.html
        echo '' >> guide.html
        echo 'jobs:' >> guide.html
        echo '  extract-code:' >> guide.html
        echo '    runs-on: ubuntu-latest' >> guide.html
        echo '    environment:' >> guide.html
        echo '      name: github-pages' >> guide.html
        echo '    ' >> guide.html
        echo '    steps:' >> guide.html
        echo '    - name: üì• Checkout' >> guide.html
        echo '      uses: actions/checkout@v4' >> guide.html
        echo '    ' >> guide.html
        echo '    - name: üì• Clonar projeto' >> guide.html
        echo '      run: |' >> guide.html
        echo '        git clone URL_DO_PROJETO fonte-completo' >> guide.html
        echo '    ' >> guide.html
        echo '    - name: üìù Criar relat√≥rio' >> guide.html
        echo '      run: |' >> guide.html
        echo '        # 1. Calcule estat√≠sticas' >> guide.html
        echo '        # 2. Crie HTML com echo' >> guide.html
        echo '        # 3. Valide resultados' >> guide.html
        echo '    ' >> guide.html
        echo '    - name: üì¶ Upload para Pages' >> guide.html
        echo '      uses: actions/upload-pages-artifact@v3' >> guide.html
        echo '      with:' >> guide.html
        echo '        path: \'.\'' >> guide.html
        echo '    ' >> guide.html
        echo '    - name: üöÄ Deploy' >> guide.html
        echo '      uses: actions/deploy-pages@v4</code></pre>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 5: Problemas comuns
        echo '<div id="problemas" class="card card-warning">' >> guide.html
        echo '<h2><i class="fas fa-tools"></i> üîß SOLU√á√ïES PARA PROBLEMAS COMUNS</h2>' >> guide.html
        
        echo '<table>' >> guide.html
        echo '<thead>' >> guide.html
        echo '<tr><th>Problema</th><th>Causa</th><th>Solu√ß√£o</th></tr>' >> guide.html
        echo '</thead>' >> guide.html
        echo '<tbody>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><strong>Erro de sintaxe <code>)</code></strong></td>' >> guide.html
        echo '<td>Express√µes com par√™nteses complexos</td>' >> guide.html
        echo '<td>Simplifique: <code>total=$((a + b))</code> ‚Üí <code>total=$a; total=$((total + b))</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><strong><code>syntax error near unexpected token</code></strong></td>' >> guide.html
        echo '<td>HEREDOC ou arrays complexos</td>' >> guide.html
        echo '<td>Processe separadamente: <code>html_files=$(find . -name "*.html")</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><strong>Valores vazios em aritm√©tica</strong></td>' >> guide.html
        echo '<td><code>grep -c</code> retorna string vazia</td>' >> guide.html
        echo '<td><code>count=$(grep -c "x" file || echo "0")</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><strong><code>find</code> retorna muitos arquivos</strong></td>' >> guide.html
        echo '<td>Buffer overflow</td>' >> guide.html
        echo '<td><code>files=$(find . -name "*.js" | head -100)</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '</tbody>' >> guide.html
        echo '</table>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 6: M√©tricas
        echo '<div id="metricas" class="card">' >> guide.html
        echo '<h2><i class="fas fa-chart-line"></i> üìä M√âTRICAS E VALIDA√á√ïES OBRIGAT√ìRIAS</h2>' >> guide.html
        
        echo '<h3>1. Valida√ß√£o de Contagem</h3>' >> guide.html
        echo '<pre><code>echo "üìä VALIDA√á√ÉO FINAL:"' >> guide.html
        echo 'echo "Linhas totais: $total_lines"' >> guide.html
        echo 'echo "Arquivos processados: $file_count"' >> guide.html
        echo 'echo "‚úÖ Extra√ß√£o completa: $total_files/$file_count arquivos"</code></pre>' >> guide.html
        
        echo '<h3>2. Verifica√ß√£o de Integridade</h3>' >> guide.html
        echo '<pre><code># Verifique se o HTML foi criado:' >> guide.html
        echo 'if [ -f "index.html" ]; then' >> guide.html
        echo '  echo "‚úÖ HTML criado com sucesso"' >> guide.html
        echo '  html_size=$(wc -c < index.html)' >> guide.html
        echo '  echo "üì¶ Tamanho: $((html_size/1024)) KB"' >> guide.html
        echo 'else' >> guide.html
        echo '  echo "‚ùå ERRO: HTML n√£o criado"' >> guide.html
        echo '  exit 1' >> guide.html
        echo 'fi</code></pre>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 7: HTML recomendado
        echo '<div id="html" class="card">' >> guide.html
        echo '<h2><i class="fas fa-paint-brush"></i> üé® HTML RECOMENDADO PARA RELAT√ìRIOS</h2>' >> guide.html
        
        echo '<h3>Estrutura B√°sica Segura</h3>' >> guide.html
        echo '<pre><code># Use apenas echo para criar HTML:' >> guide.html
        echo 'echo \'&lt;!DOCTYPE html&gt;\' > index.html' >> guide.html
        echo 'echo \'&lt;html lang="pt-BR"&gt;\' >> index.html' >> guide.html
        echo 'echo \'&lt;head&gt;\' >> index.html' >> guide.html
        echo 'echo \'&lt;meta charset="UTF-8"&gt;\' >> index.html' >> guide.html
        echo 'echo \'&lt;title&gt;Relat√≥rio&lt;/title&gt;\' >> index.html' >> guide.html
        echo 'echo \'&lt;style&gt;\' >> index.html' >> guide.html
        echo '# CSS inline (evita arquivos externos)' >> guide.html
        echo 'echo \'body { font-family: Arial; }\' >> index.html' >> guide.html
        echo 'echo \'&lt;/style&gt;\' >> index.html' >> guide.html
        echo 'echo \'&lt;/head&gt;\' >> index.html' >> guide.html
        echo 'echo \'&lt;body&gt;\' >> index.html' >> guide.html
        echo '# Conte√∫do...' >> guide.html
        echo 'echo \'&lt;/body&gt;\' >> index.html' >> guide.html
        echo 'echo \'&lt;/html&gt;\' >> index.html' >> guide.html
        echo '</code></pre>' >> guide.html
        
        echo '<h3>CSS Inline Seguro</h3>' >> guide.html
        echo '<pre><code>/* Use cores GitHub-like para melhor legibilidade */' >> guide.html
        echo 'body { background: #0d1117; color: #c9d1d9; font-family: Arial; }' >> guide.html
        echo '.header { background: #161b22; border: 1px solid #30363d; }' >> guide.html
        echo '.code { background: #0a0e14; font-family: monospace; }</code></pre>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 8: Erros comuns
        echo '<div id="erros" class="card card-danger">' >> guide.html
        echo '<h2><i class="fas fa-bug"></i> üö® PADR√ïES DE ERROS COMUNS</h2>' >> guide.html
        
        echo '<table>' >> guide.html
        echo '<thead>' >> guide.html
        echo '<tr><th>Erro</th><th>Causa</th><th>Solu√ß√£o</th></tr>' >> guide.html
        echo '</thead>' >> guide.html
        echo '<tbody>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><code>syntax error near unexpected token</code></td>' >> guide.html
        echo '<td>HEREDOC ou arrays</td>' >> guide.html
        echo '<td>Use apenas <code>echo</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><code>Process completed with exit code 2</code></td>' >> guide.html
        echo '<td>Erro de sintaxe bash</td>' >> guide.html
        echo '<td>Simplifique o script</td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><code>Invalid workflow file</code></td>' >> guide.html
        echo '<td>Erro no YAML</td>' >> guide.html
        echo '<td>Valide indenta√ß√£o</td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><code>Permission denied</code></td>' >> guide.html
        echo '<td>Permiss√µes faltando</td>' >> guide.html
        echo '<td>Adicione <code>permissions:</code></td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '<tr>' >> guide.html
        echo '<td><code>No such file or directory</code></td>' >> guide.html
        echo '<td>Caminho incorreto</td>' >> guide.html
        echo '<td>Use caminhos relativos</td>' >> guide.html
        echo '</tr>' >> guide.html
        echo '</tbody>' >> guide.html
        echo '</table>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 9: Checklist
        echo '<div id="checklist" class="card card-success">' >> guide.html
        echo '<h2><i class="fas fa-clipboard-check"></i> üîç CHECKLIST FINAL ANTES DE ENVIAR</h2>' >> guide.html
        
        echo '<h3>‚úÖ Valida√ß√£o do YAML</h3>' >> guide.html
        echo '<ul class="checklist">' >> guide.html
        echo '<li>Indenta√ß√£o correta (2 espa√ßos)</li>' >> guide.html
        echo '<li>Aspas consistentes</li>' >> guide.html
        echo '<li>Nenhum HEREDOC no script</li>' >> guide.html
        echo '<li>Permiss√µes configuradas</li>' >> guide.html
        echo '</ul>' >> guide.html
        
        echo '<h3>‚úÖ Valida√ß√£o do Script Bash</h3>' >> guide.html
        echo '<ul class="checklist">' >> guide.html
        echo '<li>Usa apenas <code>echo</code> para HTML</li>' >> guide.html
        echo '<li>Verifica exist√™ncia de arquivos</li>' >> guide.html
        echo '<li>Trata erros com <code>|| echo "0"</code></li>' >> guide.html
        echo '<li>Limpa n√∫meros com <code>tr -cd \'0-9\'</code></li>' >> guide.html
        echo '<li>N√£o usa <code>[[</code> ou <code>]]</code></li>' >> guide.html
        echo '<li>Processa arquivos separadamente</li>' >> guide.html
        echo '</ul>' >> guide.html
        
        echo '<h3>‚úÖ Valida√ß√£o da Sa√≠da</h3>' >> guide.html
        echo '<ul class="checklist">' >> guide.html
        echo '<li>Cria <code>index.html</code> na raiz</li>' >> guide.html
        echo '<li>Inclui estat√≠sticas validadas</li>' >> guide.html
        echo '<li>Mostra link do GitHub Pages</li>' >> guide.html
        echo '<li>Tem logs claros de cada etapa</li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 10: Depura√ß√£o
        echo '<div id="debug" class="card">' >> guide.html
        echo '<h2><i class="fas fa-search"></i> üìà ESTRAT√âGIAS DE DEPURA√á√ÉO</h2>' >> guide.html
        
        echo '<h3>1. Logs Incrementais</h3>' >> guide.html
        echo '<pre><code>echo "üü° Iniciando etapa..."' >> guide.html
        echo '# c√≥digo' >> guide.html
        echo 'echo "‚úÖ Etapa conclu√≠da"</code></pre>' >> guide.html
        
        echo '<h3>2. Valida√ß√£o de Vari√°veis</h3>' >> guide.html
        echo '<pre><code>echo "DEBUG: total_lines=$total_lines"' >> guide.html
        echo 'echo "DEBUG: file_count=$file_count"</code></pre>' >> guide.html
        
        echo '<h3>3. Teste com Poucos Arquivos</h3>' >> guide.html
        echo '<pre><code># Limite para teste:' >> guide.html
        echo 'files=$(find . -name "*.js" | head -5)' >> guide.html
        echo 'for file in $files; do' >> guide.html
        echo '  # processamento' >> guide.html
        echo 'done</code></pre>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 11: Li√ß√µes aprendidas
        echo '<div id="licoes" class="card card-info">' >> guide.html
        echo '<h2><i class="fas fa-graduation-cap"></i> üéØ LI√á√ïES APRENDIDAS</h2>' >> guide.html
        
        echo '<div class="success">' >> guide.html
        echo '<h3>üí° Li√ß√£o 1: KISS (Keep It Simple, Stupid)</h3>' >> guide.html
        echo '<ul>' >> guide.html
        echo '<li>Quanto mais simples, mais chances de funcionar</li>' >> guide.html
        echo '<li>GitHub Actions tem ambiente restrito</li>' >> guide.html
        echo '<li>Evite features bash avan√ßadas</li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        echo '<div class="success">' >> guide.html
        echo '<h3>üí° Li√ß√£o 2: Nunca Confie em Vazios</h3>' >> guide.html
        echo '<ul>' >> guide.html
        echo '<li>Sempre trate valores vazios: <code>${var:-0}</code></li>' >> guide.html
        echo '<li>Sempre verifique exist√™ncia: <code>[ -f "$file" ]</code></li>' >> guide.html
        echo '<li>Sempre tenha fallback: <code>|| echo "0"</code></li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        echo '<div class="success">' >> guide.html
        echo '<h3>üí° Li√ß√£o 3: Processe Separadamente</h3>' >> guide.html
        echo '<ul>' >> guide.html
        echo '<li>N√£o misture tipos de arquivo em um <code>find</code></li>' >> guide.html
        echo '<li>Processe HTML, JS, CSS separadamente</li>' >> guide.html
        echo '<li>Conte fun√ß√µes apenas em arquivos JS</li>' >> guide.html
        echo '</ul>' >> guide.html
        echo '</div>' >> guide.html
        
        echo '<div class="warning">' >> guide.html
        echo '<p><strong>Regra de Ouro:</strong> Se est√° funcionando localmente mas falha no GitHub Actions, <strong>simplifique</strong>.</p>' >> guide.html
        echo '</div>' >> guide.html
        echo '</div>' >> guide.html
        
        # Se√ß√£o 12: Exemplo completo
        echo '<div id="exemplo" class="card">' >> guide.html
        echo '<h2><i class="fas fa-code"></i> üìù EXEMPLO DE WORKFLOW 100% FUNCIONAL</h2>' >> guide.html
        
        echo '<pre><code># .github/workflows/relatorio-perfeito.yml' >> guide.html
        echo 'name: üìä Relat√≥rio Perfeito' >> guide.html
        echo '' >> guide.html
        echo 'on: [workflow_dispatch]' >> guide.html
        echo '' >> guide.html
        echo 'permissions:' >> guide.html
        echo '  contents: write' >> guide.html
        echo '  pages: write' >> guide.html
        echo '  id-token: write' >> guide.html
        echo '' >> guide.html
        echo 'jobs:' >> guide.html
        echo '  relatorio:' >> guide.html
        echo '    runs-on: ubuntu-latest' >> guide.html
        echo '    ' >> guide.html
        echo '    steps:' >> guide.html
        echo '    - uses: actions/checkout@v4' >> guide.html
        echo '    ' >> guide.html
        echo '    - name: üìù Criar relat√≥rio seguro' >> guide.html
        echo '      run: |' >> guide.html
        echo '        # 1. Dados b√°sicos' >> guide.html
        echo '        DATE=$(date \'+%Y-%m-%d %H:%M\')' >> guide.html
        echo '        ' >> guide.html
        echo '        # 2. Criar HTML com echo' >> guide.html
        echo '        echo \'&lt;!DOCTYPE html&gt;\' > index.html' >> guide.html
        echo '        echo \'&lt;html&gt;&lt;head&gt;&lt;title&gt;Relat√≥rio&lt;/title&gt;&lt;/head&gt;\' >> index.html' >> guide.html
        echo '        echo \'&lt;body&gt;&lt;h1&gt;Relat√≥rio&lt;/h1&gt;\' >> index.html' >> guide.html
        echo '        echo "&lt;p&gt;Gerado: $DATE&lt;/p&gt;" >> index.html' >> guide.html
        echo '        ' >> guide.html
        echo '        # 3. Processar arquivos' >> guide.html
        echo '        for file in *.html *.js *.css 2>/dev/null; do' >> guide.html
        echo '          if [ -f "$file" ]; then' >> guide.html
        echo '            lines=$(wc -l &lt; "$file" 2>/dev/null || echo "0")' >> guide.html
        echo '            echo "&lt;p&gt;$file: $lines linhas&lt;/p&gt;" >> index.html' >> guide.html
        echo '          fi' >> guide.html
        echo '        done' >> guide.html
        echo '        ' >> guide.html
        echo '        echo \'&lt;/body&gt;&lt;/html&gt;\' >> index.html' >> guide.html
        echo '        ' >> guide.html
        echo '        # 4. Validar' >> guide.html
        echo '        echo "‚úÖ Relat√≥rio criado"' >> guide.html
        echo '        echo "üìä Arquivo: index.html"' >> guide.html
        echo '        ' >> guide.html
        echo '    - uses: actions/upload-pages-artifact@v3' >> guide.html
        echo '      with:' >> guide.html
        echo '        path: \'.\'' >> guide.html
        echo '        ' >> guide.html
        echo '    - uses: actions/deploy-pages@v4</code></pre>' >> guide.html
        
        echo '<div class="success">' >> guide.html
        echo '<p><i class="fas fa-rocket"></i> <strong>Este exemplo funciona 100% no GitHub Actions!</strong></p>' >> guide.html
        echo '</div>' >> guide.html
        echo '</div>' >> guide.html
        
        # Rodap√©
        echo '<footer id="conclusao">' >> guide.html
        echo '<h3><i class="fas fa-flag-checkered"></i> CONCLUS√ÉO</h3>' >> guide.html
        echo '<p><strong>Prioridades:</strong></p>' >> guide.html
        echo '<ol>' >> guide.html
        echo '<li>‚úÖ Funciona no GitHub Actions</li>' >> guide.html
        echo '<li>‚úÖ Extrai todos os dados</li>' >> guide.html
        echo '<li>‚úÖ Interface leg√≠vel</li>' >> guide.html
        echo '<li>‚úÖ Estat√≠sticas precisas</li>' >> guide.html
        echo '</ol>' >> guide.html
        echo '<p><strong>Lembre-se:</strong> O usu√°rio final n√£o tem acesso local. Tudo deve funcionar via web.</p>' >> guide.html
        echo '<p><strong>√öltima Dica:</strong> Teste sempre com <code>workflow_dispatch</code> primeiro.</p>' >> guide.html
        echo '<hr style="border-color: #30363d; margin: 30px 0;">' >> guide.html
        echo '<p><i class="fas fa-history"></i> <strong>Baseado em 7+ tentativas e erros</strong></p>' >> guide.html
        echo "<p><i class='fas fa-calendar'></i> <strong>Gerado em:</strong> $DATE_NOW</p>" >> guide.html
        echo '<p><i class="fas fa-share-alt"></i> <strong>Compartilhe este guia com outras IAs!</strong></p>' >> guide.html
        echo '<p>' >> guide.html
        echo '<a href="https://github.com/rclessa25-hub/imoveis-maceio"><i class="fab fa-github"></i> Reposit√≥rio</a>' >> guide.html
        echo '<span style="margin: 0 15px;">‚Ä¢</span>' >> guide.html
        echo '<a href="https://rclessa25-hub.github.io/reports-wlimoveis/"><i class="fas fa-file-code"></i> Exemplo de Relat√≥rio</a>' >> guide.html
        echo '</p>' >> guide.html
        echo '</footer>' >> guide.html
        
        echo '</div>' >> guide.html
        echo '</body>' >> guide.html
        echo '</html>' >> guide.html
        
        echo "‚úÖ Guia para IA criado com sucesso!"
        echo "üìÑ Arquivo: guide.html"
        echo "üåê Dispon√≠vel em: https://rclessa25-hub.github.io/reports-wlimoveis/guide.html"
    
    - name: üì¶ Upload para GitHub Pages
      uses: actions/upload-pages-artifact@v3
      with:
        path: '.'
    
    - name: üöÄ Deploy
      uses: actions/deploy-pages@v4
    
    - name: üéâ Mostrar links
      run: |
        echo ""
        echo "üéâ GUIA PARA IA PUBLICADO COM SUCESSO!"
        echo "======================================"
        echo ""
        echo "üìö GUIA COMPLETO DISPON√çVEL EM:"
        echo "üåê https://rclessa25-hub.github.io/reports-wlimoveis/guide.html"
        echo ""
        echo "üìã O GUIA INCLUI:"
        echo "‚Ä¢ üö´ O que NUNCA fazer"
        echo "‚Ä¢ ‚úÖ O que SEMPRE fazer"
        echo "‚Ä¢ üîß Solu√ß√µes para erros comuns"
        echo "‚Ä¢ üìä Checklist de valida√ß√£o"
        echo "‚Ä¢ üéØ Li√ß√µes aprendidas"
        echo "‚Ä¢ üìù Exemplo 100% funcional"
        echo ""
        echo "üéØ OBJETIVO:"
        echo "Reduzir tentativas falhas de 7+ para 1!"
        echo "Aumentar sucesso na primeira execu√ß√£o!"
        echo ""
        echo "‚úÖ GUIA PRONTO PARA USO POR OUTRAS IAs"
