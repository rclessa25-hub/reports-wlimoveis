name: ğŸ¯ Publicar Guia via Arquivo

on:
  workflow_dispatch:

permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  publish-guide:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
    
    steps:
    - name: ğŸ“¥ Checkout
      uses: actions/checkout@v4
    
    - name: ğŸ“ Criar guia mÃ­nimo
      run: |
        # Criar conteÃºdo DIRETO - mÃ­nimo possÃ­vel
        echo '<!DOCTYPE html><html><head><title>Guia IA</title><style>body{font-family:Arial;margin:20px;}</style></head><body>' > guide.html
        echo '<h1>Guia para IA</h1>' >> guide.html
        echo '<p>Baseado em 9+ tentativas no GitHub Actions</p>' >> guide.html
        echo '<h2>ğŸš« O QUE NUNCA FAZER</h2>' >> guide.html
        echo '<p>1. NUNCA use HEREDOC (causa erro de sintaxe)</p>' >> guide.html
        echo '<p>2. NUNCA use &lt; sem escape (causa "lt: command not found")</p>' >> guide.html
        echo '<h2>âœ… O QUE SEMPRE FAZER</h2>' >> guide.html
        echo '<p>1. Use apenas echo para criar arquivos</p>' >> guide.html
        echo '<p>2. Escape &lt; como &amp;lt; e &gt; como &amp;gt;</p>' >> guide.html
        echo '<p>3. Verifique se arquivos existem: [ -f "arquivo" ]</p>' >> guide.html
        echo '<p>4. Trate erros: comando || echo "0"</p>' >> guide.html
        echo '</body></html>' >> guide.html
        
        echo "âœ… Guia mÃ­nimo criado"
    
    - name: ğŸ“¦ Upload para Pages
      uses: actions/upload-pages-artifact@v3
      with:
        path: '.'
    
    - name: ğŸš€ Deploy
      uses: actions/deploy-pages@v4
    
    - name: ğŸ‰ Mostrar link
      run: |
        echo "ğŸŒ DisponÃ­vel em: https://rclessa25-hub.github.io/reports-wlimoveis/guide.html"
