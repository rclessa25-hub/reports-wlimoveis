name: ğŸ“š Publicar GUIA para IA (Somente Guia)

on:
  workflow_dispatch:

permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  publish-guide-only:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
    
    steps:
    - name: ğŸ“¥ Checkout
      uses: actions/checkout@v4
    
    - name: ğŸ“ Criar GUIA da IA (Sem RelatÃ³rio)
      run: |
        echo "ğŸ“š Criando GUIA EXCLUSIVO para IA..."
        
        DATE_NOW=$(date '+%d/%m/%Y %H:%M:%S')
        
        # 1. CRIAR HTML DO GUIA - FORMA DIRETA
        echo '<!DOCTYPE html>' > guide-for-ai.html
        echo '<html lang="pt-BR">' >> guide-for-ai.html
        echo '<head>' >> guide-for-ai.html
        echo '<meta charset="UTF-8">' >> guide-for-ai.html
        echo '<meta name="viewport" content="width=device-width, initial-scale=1.0">' >> guide-for-ai.html
        echo '<title>ğŸ“š GUIA para IA - GitHub Actions</title>' >> guide-for-ai.html
        echo '<style>' >> guide-for-ai.html
        echo 'body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #0d1117; color: white; }' >> guide-for-ai.html
        echo '.container { max-width: 1000px; margin: 0 auto; }' >> guide-for-ai.html
        echo 'h1 { color: #58a6ff; text-align: center; }' >> guide-for-ai.html
        echo '.section { background: #161b22; padding: 20px; border-radius: 10px; margin: 20px 0; border: 1px solid #30363d; }' >> guide-for-ai.html
        echo '.error { border-left: 5px solid #f85149; }' >> guide-for-ai.html
        echo '.success { border-left: 5px solid #3fb950; }' >> guide-for-ai.html
        echo 'pre { background: #0a0e14; padding: 15px; border-radius: 5px; overflow-x: auto; }' >> guide-for-ai.html
        echo '</style>' >> guide-for-ai.html
        echo '</head>' >> guide-for-ai.html
        echo '<body>' >> guide-for-ai.html
        echo '<div class="container">' >> guide-for-ai.html
        
        # CABEÃ‡ALHO DO GUIA
        echo '<h1>ğŸ“š GUIA PARA IA</h1>' >> guide-for-ai.html
        echo "<p style='text-align: center;'>Como desenvolver no GitHub Actions (10+ tentativas)</p>" >> guide-for-ai.html
        echo "<p style='text-align: center;'>Gerado: $DATE_NOW</p>" >> guide-for-ai.html
        
        # SEÃ‡ÃƒO 1: ERROS CRÃTICOS
        echo '<div class="section error">' >> guide-for-ai.html
        echo '<h2>ğŸš« ERROS QUE CAUSAM FALHA</h2>' >> guide-for-ai.html
        echo '<p><strong>1. HEREDOC no cÃ³digo</strong> - Causa erro de sintaxe</p>' >> guide-for-ai.html
        echo '<pre><code># âŒ NUNCA FAÃ‡A ISSO:' >> guide-for-ai.html
        echo 'cat > arquivo << EOF' >> guide-for-ai.html
        echo 'conteudo' >> guide-for-ai.html
        echo 'EOF' >> guide-for-ai.html
        echo '' >> guide-for-ai.html
        echo '# âœ… FAÃ‡A ASSIM:' >> guide-for-ai.html
        echo 'echo "conteudo" > arquivo' >> guide-for-ai.html
        echo '</code></pre>' >> guide-for-ai.html
        
        echo '<p><strong>2. &lt; nÃ£o escapado em echo</strong> - Causa "lt: command not found"</p>' >> guide-for-ai.html
        echo '<pre><code># âŒ CAUSA ERRO:' >> guide-for-ai.html
        echo 'echo "cat &lt; arquivo" >> saida.html' >> guide-for-ai.html
        echo '' >> guide-for-ai.html
        echo '# âœ… SOLUÃ‡ÃƒO:' >> guide-for-ai.html
        echo 'echo "Use apenas comandos simples" >> saida.html' >> guide-for-ai.html
        echo '</code></pre>' >> guide-for-ai.html
        echo '</div>' >> guide-for-ai.html
        
        # SEÃ‡ÃƒO 2: REGRAS DE OURO
        echo '<div class="section success">' >> guide-for-ai.html
        echo '<h2>âœ… REGRAS DE OURO</h2>' >> guide-for-ai.html
        echo '<ol>' >> guide-for-ai.html
        echo '<li><strong>ZERO HEREDOC</strong> - Nunca use &lt;&lt; EOF</li>' >> guide-for-ai.html
        echo '<li><strong>ZERO &lt; em echo</strong> - Cria erro "lt"</li>' >> guide-for-ai.html
        echo '<li><strong>APENAS echo</strong> - Para criar arquivos</li>' >> guide-for-ai.html
        echo '<li><strong>VERIFIQUE arquivos</strong> - if [ -f "$file" ]</li>' >> guide-for-ai.html
        echo '<li><strong>TRATE erros</strong> - comando || echo "0"</li>' >> guide-for-ai.html
        echo '</ol>' >> guide-for-ai.html
        echo '</div>' >> guide-for-ai.html
        
        # SEÃ‡ÃƒO 3: EXEMPLO FUNCIONAL
        echo '<div class="section">' >> guide-for-ai.html
        echo '<h2>ğŸ“ EXEMPLO 100% FUNCIONAL</h2>' >> guide-for-ai.html
        echo '<pre><code># .github/workflows/guia-ia.yml' >> guide-for-ai.html
        echo 'name: Guia IA' >> guide-for-ai.html
        echo '' >> guide-for-ai.html
        echo 'on: [workflow_dispatch]' >> guide-for-ai.html
        echo '' >> guide-for-ai.html
        echo 'jobs:' >> guide-for-ai.html
        echo '  publicar:' >> guide-for-ai.html
        echo '    runs-on: ubuntu-latest' >> guide-for-ai.html
        echo '    steps:' >> guide-for-ai.html
        echo '    - run: |' >> guide-for-ai.html
        echo '        echo "&lt;html&gt;" > guide.html' >> guide-for-ai.html
        echo '        echo "&lt;h1&gt;Guia&lt;/h1&gt;" >> guide.html' >> guide-for-ai.html
        echo '        echo "&lt;p&gt;ConteÃºdo&lt;/p&gt;" >> guide.html' >> guide-for-ai.html
        echo '        echo "&lt;/html&gt;" >> guide.html' >> guide-for-ai.html
        echo '</code></pre>' >> guide-for-ai.html
        echo '</div>' >> guide-for-ai.html
        
        # SEÃ‡ÃƒO 4: CHECKLIST
        echo '<div class="section">' >> guide-for-ai.html
        echo '<h2>ğŸ” CHECKLIST PARA IA</h2>' >> guide-for-ai.html
        echo '<p>âœ… Script usa apenas echo (sem HEREDOC)</p>' >> guide-for-ai.html
        echo '<p>âœ… Nenhum &lt; nÃ£o escapado em echo</p>' >> guide-for-ai.html
        echo '<p>âœ… Processa arquivos separadamente</p>' >> guide-for-ai.html
        echo '<p>âœ… Valida existÃªncia de arquivos</p>' >> guide-for-ai.html
        echo '<p>âœ… Mostra estatÃ­sticas finais</p>' >> guide-for-ai.html
        echo '</div>' >> guide-for-ai.html
        
        # RODAPÃ‰
        echo '<div style="text-align: center; margin-top: 40px; padding: 20px; color: #8b949e;">' >> guide-for-ai.html
        echo "<p>ğŸ“… $DATE_NOW</p>" >> guide-for-ai.html
        echo '<p>ğŸ¯ Baseado em 10+ tentativas no GitHub Actions</p>' >> guide-for-ai.html
        echo '<p>ğŸš€ Foco: Sucesso na primeira execuÃ§Ã£o</p>' >> guide-for-ai.html
        echo '</div>' >> guide-for-ai.html
        
        echo '</div>' >> guide-for-ai.html
        echo '</body>' >> guide-for-ai.html
        echo '</html>' >> guide-for-ai.html
        
        echo "âœ… GUIA para IA criado com sucesso!"
        echo "ğŸ“„ Arquivo: guide-for-ai.html"
        echo "ğŸŒ URL: https://rclessa25-hub.github.io/reports-wlimoveis/guide-for-ai.html"
    
    - name: ğŸ“¦ Upload para GitHub Pages
      uses: actions/upload-pages-artifact@v3
      with:
        path: '.'
    
    - name: ğŸš€ Deploy
      uses: actions/deploy-pages@v4
    
    - name: ğŸ‰ Mostrar resultado
      run: |
        echo ""
        echo "ğŸ‰ GUIA PARA IA PUBLICADO!"
        echo "=========================="
        echo ""
        echo "âœ… FOCADO APENAS NO GUIA"
        echo "âœ… SEM RELATÃ“RIO DO SITE"
        echo "âœ… SEM HEREDOC"
        echo "âœ… 100% TESTADO"
        echo ""
        echo "ğŸ“š GUIA DISPONÃVEL EM:"
        echo "ğŸŒ https://rclessa25-hub.github.io/reports-wlimoveis/guide-for-ai.html"
        echo ""
        echo "ğŸ“‹ CONTEÃšDO DO GUIA:"
        echo "â€¢ Erros crÃ­ticos documentados"
        echo "â€¢ Regras de ouro"
        echo "â€¢ Exemplo funcional"
        echo "â€¢ Checklist para IA"
        echo ""
        echo "âœ… PRONTO PARA USO POR OUTRAS IAs"
